<!doctype html>
<html lang="en">

<head>
  <link rel="icon"
    href="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M3,9H7V5H3V9M3,14H7V10H3V14M8,14H12V10H8V14M13,14H17V10H13V14M8,9H12V5H8V9M13,5V9H17V5H13M18,14H22V10H18V14M3,19H7V15H3V19M8,19H12V15H8V19M13,19H17V15H13V19M18,19H22V15H18V19M18,5V9H22V5H18Z'/%3E%3C/svg%3E"
    type="image/svg+xml" />
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <title>Wled-pixel</title>
</head>

<body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <header>
    <div class="px-3 py-2 bg-dark text-white">
      <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
          <a href="/" class="d-flex align-items-center my-2 my-lg-0 me-lg-auto text-white text-decoration-none">
            <h1 class="mb-3 fw-bold font-monospace">wledPixel</h1>
          </a>

          <ul class="nav col-12 col-lg-auto my-2 justify-content-center my-md-0 text-small">
            <li>
              <a href="/" class="nav-link text-white">
                Home
              </a>
            </li>
            <li>
              <span class="nav-link text-secondary">
                Zone Settings
              </span>
            </li>
            <li>
              <a href="/service-settings" class="nav-link text-white">
                Service Settings
              </a>
            </li>
            <li>
              <a href="/backup" class="nav-link text-white">
                Backup/Restore
              </a>
            </li>
            <li>
              <a href="/update" class="nav-link text-white">
                Update firmware
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </header>
  <div class="container">
    <main>
      <div class="py-5 text-center">
        <h2>Zone Settings</h2>
        <p class="lead">Configure the number of zones, work mode for each zone, visual effects, and display formats.</p>
      </div>
      <div class="row g-5">
        <div class="col-md-5 col-lg-4 order-md-last">
          <h4 class="d-flex justify-content-between align-items-center mb-3">
            <span class="text-primary">Info</span>
          </h4>
          <ul class="list-group mb-3">
            <li class="list-group-item d-flex justify-content-between lh-sm">
              <div>
                <h6 class="my-0">wledPixel</h6>
                <small class="text-muted">wledPixel dot led Display</small>
              </div>
              <span class="text-muted" id="firmwareVer"></span>
            </li>
            <li class="list-group-item d-flex justify-content-between lh-sm">
              <div>
                <h6 class="my-0">Platform:</h6>
              </div>
              <span class="text-muted" id="platform"></span>
            </li>
            <li class="list-group-item d-flex justify-content-between lh-sm">
              <div>
                <h6 class="my-0">Wifi SSID:</h6>
              </div>
              <span class="text-muted" id="wifiSsid"></span>
            </li>
            <li class="list-group-item d-flex justify-content-between lh-sm">
              <div>
                <h6 class="my-0">Wifi IP:</h6>
              </div>
              <span class="text-muted" id="wifiIp"></span>
            </li>
            <li class="list-group-item d-flex justify-content-between lh-sm">
              <div>
                <h6 class="my-0">Wifi Gateway:</h6>
              </div>
              <span class="text-muted" id="wifiGateway"></span>
            </li>
            <li class="list-group-item d-flex justify-content-between lh-sm">
              <div>
                <h6 class="my-0">Wifi Signal:</h6>
              </div>
              <span class="text-muted" id="wifiRssi"></span>
            </li>
            <li class="list-group-item d-flex justify-content-between lh-sm">
              <div>
                <h6 class="my-0">MQTT device prefix:</h6>
              </div>
              <span class="text-muted" id="mqttDevicePrefixInfo"></span>
            </li>
            <li class="list-group-item d-flex justify-content-between lh-sm">
              <div>
                <h6 class="my-0">ds18b20 Temperature:</h6>
              </div>
              <span class="text-muted" id="ds18b20TempInfo"></span>
            </li>
          </ul>

          <h4 class="d-flex justify-content-between align-items-center mb-3">
            <span class="text-primary">Help</span>
          </h4>
          <div>
            <h6 class="my-2">Font</h6>
            <small class="text-muted"><b>Cyrillic</b> - compact neat font<br><b>Wled</b> - fundamental
              font<br><b>Default</b> - standard display library font</small>
          </div>
          <hr>
          <div>
            <h6 class="my-2">Character spacing</h6>
            <small class="text-muted">Distance between characters on the display. The default is exactly 1. It is useful
              to set 0 if you need to fit a lot of text on the display or you can use the Cyrillic font.</small>
          </div>
          <hr>
          <div>
            <h6 class="my-2">Wall clock</h6>
            <small class="text-muted">Clock mode. It has the following display options:
              <br><b>HH:MM</b> - Hours : Minutes [21:43]
              <br><b>HH:MM:SS</b> - Hours : Minutes : Seconds [21:43:54]
              <br><b>HH</b> - Hours [21]
              <br><b>MM</b> - Minutes [43]
              <br><b>dd.mm.yyyy</b> - Day.Month.Year [21.06.2022]
              <br><b>dd.mm</b> - Day.Month [21.06]
              <br><b>dd.mm aa</b> - Day.Month weekday name (e.g., Sun) [21.06 Tue] <b>*</b><i>in Cyrillic font weekday
                name will be in Cyrillic</i>
              <br><br><b>Advice</b><br>In <b>HH:MM</b> and <b>HH:MM:SS</b> mode, two dots flash every second. For
              correct operation, it is recommended to set the <b>effectIN</b> and <b>OUT</b> to the value
              <b>NO_EFFECT</b>.
            </small>
          </div>
          <hr>
          <div>
            <h6 class="my-2">Open Weather map</h6>
            <small class="text-muted">First, configure all the settings at the bottom of the page, and then turn on the
              work mode in the desired zone.
              <br><br>A free API token allows you to make requests no more than once every <b>60 seconds</b>! Otherwise,
              your token will be <b>blocked</b> for 24 hours.
              <br><br>Each zone makes its own request to the API, consider this when calculating the update interval (2
              zones - 120 seconds, etc.)</small>
          </div>
          <hr>
          <div>
            <h6 class="my-2">Home Assistant client</h6>
            <small class="text-muted">Use a <a href="https://www.home-assistant.io/docs/authentication/">Long-lived
                access token</a>.
              <br><br>Only display of sensor value is supported.
              <br><br>Sensor ID copy from your Home Assistant (e.g. sensor.lumi_weather)</small>
          </div>
          <hr>
          <div>
            <h6 class="my-2">MQTT client</h6>
            <small class="text-muted">The following topics are supported:
              <ul>
                <li><b>devicePrefix/zone<i>N</i>/workmode</b> - zone work mode</li>
                <ul>
                  <li>mqttClient</li>
                  <li>manualInput</li>
                  <li>wallClock</li>
                  <li>owmWeather</li>
                  <li>haClient</li>
                  <li>intTempSensor (DS18B20)</li>
                  <li>wopr (WarGames effect)</li>
                  <li>stockTicker</li>
                </ul>
                <li><b>devicePrefix/zone<i>N</i>/text</b> - text to display (for mqttClient mode)</li>
                <li><b>devicePrefix/zone<i>N</i>/scrolleffectIn</b> - scroll effect <b>IN</b></li>
                <li><b>devicePrefix/zone<i>N</i>/scrolleffectOut</b> - scroll effect <b>Out</b></li><br>
                <b>scrolleffectIn</b> and <b>scrolleffectOut</b> support next values:
                <ul>
                  <li>PA_NO_EFFECT</li>
                  <li>PA_SCROLL_UP</li>
                  <li>PA_SCROLL_DOWN</li>
                  <li>PA_SCROLL_LEFT</li>
                  <li>PA_SCROLL_RIGHT</li>
                  <li>PA_SLICE</li>
                  <li>PA_MESH</li>
                  <li>PA_FADE</li>
                  <li>PA_DISSOLVE</li>
                  <li>PA_BLINDS</li>
                  <li>PA_RANDOM</li>
                  <li>PA_WIPE</li>
                  <li>PA_WIPE_CURSOR</li>
                  <li>PA_SCAN_HORIZ</li>
                  <li>PA_SCAN_VERT</li>
                  <li>PA_OPENING</li>
                  <li>PA_OPENING_CURSOR</li>
                  <li>PA_CLOSING</li>
                  <li>PA_CLOSING_CURSOR</li>
                  <li>PA_SCROLL_UP_LEFT</li>
                  <li>PA_SCROLL_UP_RIGHT</li>
                  <li>PA_SCROLL_DOWN_LEFT</li>
                  <li>PA_SCROLL_DOWN_RIGHT</li>
                  <li>PA_GROW_UP</li>
                  <li>PA_GROW_DOWN</li>
                </ul><br>
                <li><b>devicePrefix/zone<i>N</i>/scrollspeed</b> - scroll speed</li>
                <li><b>devicePrefix/zone<i>N</i>/scrollpause</b> - scroll pause</li>
                <li><b>devicePrefix/zone<i>N</i>/scrollalign</b> - scroll alignment</li>
                <li><b>devicePrefix/zone<i>N</i>/charspacing</b> - character spacing</li>
                <li><b>devicePrefix/intensity</b> - brightness</li>
                <li><b>devicePrefix/zone<i>N</i>/scrollInfinite</b> - infinite scroll (on/off)</li>
                <li><b>devicePrefix/zone<i>N</i>/workmode</b> - zone work mode</li>
                <li><b>devicePrefix/power</b> - display power control, support <b>on</b> / <b>off</b> values</li>
              </ul>
              where <b>devicePrefix</b> = <span id="mqttDevicePrefixHelp"></span>
              <br><b>zoneN</b> = zone number (e.g. Zone0, Zone1, Zone2, Zone3)
            </small>
          </div>
          <hr>
          <div>
            <h6 class="my-2">HTTP API</h6>
            <small class="text-muted">
              <b>Manual Message:</b><br>
              POST to <b>/api/message</b> with parameters:
              <ul>
                <li><b>messageZone0</b> ... <b>messageZone3</b> - Text to display</li>
              </ul>
              Sending the same message again will restart the animation immediately.
            </small>
          </div>

        </div>
        <div class="col-md-7 col-lg-8">
          <form class="needs-validation" novalidate="">
            <div class="row g-3">

              <h4 class="mb-3">Display settings <span class="text-primary fs-6" style="--bs-text-opacity: .5;">[reboot
                  required]</span></h4>
              <div class="row g-3">
                <div class="col-sm-4">
                  <label for="Numbers of zones" class="form-label">Number of zones</label>
                  <select class="form-select" aria-label="Default select example" id="zoneNumbers">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                  </select>
                  <div class="invalid-feedback">
                    Valid first name is required.
                  </div>
                </div>

                <div class="col-sm-4">
                  <label for="zone0Begin" class="form-label">First module <span class="text-muted">[ zone 0
                      ]</span></label>
                  <input type="text" class="form-control" id="zone0Begin">
                </div>
                <div class="col-sm-4">
                  <label for="zone0End" class="form-label">Last module <span class="text-muted">[ zone 0
                      ]</span></label>
                  <input type="text" class="form-control" id="zone0End">
                </div>
                <div class="col-sm-4"></div>
                <div class="col-sm-4" id="zone1BeginDiv">
                  <label for="zone1Begin" class="form-label">First module <span class="text-muted">[ zone 1
                      ]</span></label>
                  <input type="text" class="form-control" id="zone1Begin">
                </div>
                <div class="col-sm-4" id="zone1EndDiv">
                  <label for="zone1End" class="form-label">Last module <span class="text-muted">[ zone 1
                      ]</span></label>
                  <input type="text" class="form-control" id="zone1End">
                </div>
                <div class="col-sm-4"></div>
                <div class="col-sm-4" id="zone2BeginDiv">
                  <label for="zone2Begin" class="form-label">First module <span class="text-muted">[ zone 2
                      ]</span></label>
                  <input type="text" class="form-control" id="zone2Begin">
                </div>
                <div class="col-sm-4" id="zone2EndDiv">
                  <label for="zone2End" class="form-label">Last module <span class="text-muted">[ zone 2
                      ]</span></label>
                  <input type="text" class="form-control" id="zone2End">
                </div>
                <div class="col-sm-4"></div>
                <div class="col-sm-4" id="zone3BeginDiv">
                  <label for="zone3Begin" class="form-label">First module <span class="text-muted">[ zone 3
                      ]</span></label>
                  <input type="text" class="form-control" id="zone3Begin">
                </div>
                <div class="col-sm-4" id="zone3EndDiv">
                  <label for="zone3End" class="form-label">Last module <span class="text-muted">[ zone 3
                      ]</span></label>
                  <input type="text" class="form-control" id="zone3End">
                </div>

                <button id="displaySettings" class="w-100 btn btn-primary btn-lg"
                  onClick="preparePostRequest(event, this.id, null);">Apply and reboot</button>

                <hr class="my-4">

                <div class="col-11">
                  <label for="intensity" class="form-label">Brightness</label>
                  <input type="range" class="form-range" min="1" max="16" step="1" id="intensity"
                    onChange="preparePostRequest(event, this.id, this.value);">
                </div>
                <div class="col-1 align-self-end">
                  <label id="intensityValue" for="intensity" class="form-label text-primary"></label>
                </div>

                <hr class="my-5">

                <h3 class="mb-3">Zone 0</h3>

                <div class="col-5">
                  <label for="workModeZone0" class="form-label">Working mode</label>
                  <select id="workModeZone0" class="form-select">
                    <option value="mqttClient">MQTT client</option>
                    <option value="manualInput">Manual input</option>
                    <option value="wallClock">Wall clock</option>
                    <option value="owmWeather">Open Weather map</option>
                    <option value="haClient">Home Assistant client</option>
                    <option value="intTempSensor">Internal Temperature sensor (ds18b20)</option>
                    <option value="wopr">WOPR Mode (WarGames)</option>
                    <option value="countdown">Countdown timer</option>
                    <option value="stockTicker">Stock Ticker</option>
                  </select>
                </div>

                <div class="col-7" id="emptyZone0Div"></div>
                <div class="col-7" id="stockDisplayFormatZone0Div" style="display: none;">
                  <label for="stockDisplayFormatZone0" class="form-label">Display format</label>
                  <select id="stockDisplayFormatZone0" class="form-select">
                    <option value="namePrice">Name + Price</option>
                    <option value="priceOnly">Price only</option>
                    <option value="changePct">Name + % Change</option>
                    <option value="pctOnly">% only</option>
                  </select>
                </div>
                <div class="col-7" id="countdownTargetZone0Div" style="display: none;">
                  <label for="countdownTargetZone0" class="form-label">Target date/time</label>
                  <input type="datetime-local" class="form-control" id="countdownTargetZone0" step="1">
                </div>
                <div class="col-5" id="mqttZone0PrefixDiv" style="display: none;">
                  <label for="mqttZone0Prefix" class="form-label">MQTT zone text topic</label>
                  <input type="text" class="form-control" id="mqttTextTopicZone0">
                </div>
                <div class="col-2" id="mqttPostfixZone0Div" style="display: none;">
                  <label for="mqttPostfixZone0" class="form-label">Postfix</label>
                  <input type="text" class="form-control" id="mqttPostfixZone0">
                </div>
                <div class="col-7" id="clockDisplayFormatZone0Div" style="display: none;">
                  <label for="clockDisplayFormatZone0" class="form-label">Time format</label>
                  <select id="clockDisplayFormatZone0" class="form-select">
                    <option value="HHMM">HH:MM</option>
                    <option value="HHMMSS">HH:MM:SS</option>
                    <option value="HH">HH</option>
                    <option value="MM">MM</option>
                    <option value="ddmmyyyy">dd.mm.yyyy</option>
                    <option value="ddmm">dd.mm</option>
                    <option value="ddmmaa">dd.mm aa</option>
                    <option value="aa">aa</option>
                    <option value="ddmmaahhmm">ddmmaahhmm</option>
                  </select>
                </div>
                <div class="col-12">
                  <div class="d-flex gap-4">
                    <div id="scrollInfiniteZone0Div" style="display: none;">
                      <div class="form-check form-switch pt-2">
                        <input class="form-check-input" type="checkbox" id="scrollInfiniteZone0"
                          onChange="preparePostRequest(event, this.id, this.checked);">
                        <label class="form-check-label" for="scrollInfiniteZone0">Infinite Scroll</label>
                      </div>
                    </div>
                    <div id="stockShowArrowsZone0Div" style="display: none;">
                      <div class="form-check form-switch pt-2">
                        <input class="form-check-input" type="checkbox" id="stockShowArrowsZone0">
                        <label class="form-check-label" for="stockShowArrowsZone0">Show price change arrows</label>
                      </div>
                    </div>
                  </div>
                </div>


                <div class="col-7" id="owmWhatToDisplayZone0div" style="display: none;">
                  <label for="owmWhatToDisplayZone0" class="form-label">What to display</label>
                  <select id="owmWhatToDisplayZone0" class="form-select">
                    <option value="owmTemperature">Temperature</option>
                    <option value="owmHumidity">Humidity</option>
                    <option value="owmPressure">Pressure</option>
                    <option value="owmWindSpeed">Wind speed</option>
                    <option value="owmWeatherIcon">Wether icon</option>
                  </select>
                </div>
                <div class="col-5" id="haSensorIdZone0Div" style="display: none;">
                  <label for="haSensorIdZone0" class="form-label">Sensor ID</label>
                  <input type="text" class="form-control" id="haSensorIdZone0">
                </div>
                <div class="col-2" id="haSensorPostfixZone0Div" style="display: none;">
                  <label for="haSensorPostfixZone0" class="form-label">Postfix</label>
                  <input type="text" class="form-control" id="haSensorPostfixZone0">
                </div>
                <div class="col-7" id="ds18b20PostfixZone0Div" style="display: none;">
                  <label for="ds18b20PostfixZone0" class="form-label">Postfix</label>
                  <input type="text" class="form-control" id="ds18b20PostfixZone0">
                </div>
                <div id="stockSymbolsZone0Div" style="display: none;">
                  <div class="row g-2">
                    <div class="col-12">
                      <label for="stockSymbolsZone0" class="form-label">Stock symbols (comma separated)</label>
                      <input type="text" class="form-control" id="stockSymbolsZone0" placeholder="AAPL,GOOG,TSLA">
                    </div>
                    <div class="col-6">
                      <label for="stockPrefixZone0" class="form-label">Prefix</label>
                      <input type="text" class="form-control" id="stockPrefixZone0">
                    </div>
                    <div class="col-6">
                      <label for="stockPostfixZone0" class="form-label">Postfix</label>
                      <input type="text" class="form-control" id="stockPostfixZone0">
                    </div>

                  </div>
                </div>
                <!-- Countdown settings Zone 0 -->
                <div id="countdownSettingsZone0Div" style="display: none;">
                  <div class="row g-2">
                    <div class="col-6">
                      <label for="countdownFormatZone0" class="form-label">Display format</label>
                      <select id="countdownFormatZone0" class="form-select">
                        <option value="auto">Auto</option>
                        <option value="YY">YY</option>
                        <option value="YYMM">YY MM</option>
                        <option value="YYMMDDHHMM">YY MM DD HH MM</option>
                        <option value="YYMMDDHHMMSS">YY MM DD HH MM SS</option>
                        <option value="DD">DD</option>
                        <option value="DDHH">DD HH</option>
                        <option value="DDHHMM">DD HH MM</option>
                        <option value="DDHHMMSS">DD HH MM SS</option>
                        <option value="DDMM">DD MM</option>
                        <option value="HH">HH</option>
                        <option value="HHMM">HH MM</option>
                        <option value="HHMMSS">HH MM SS</option>
                        <option value="MM">MM</option>
                        <option value="MMSS">MM SS</option>
                        <option value="SS">SS</option>
                      </select>
                    </div>
                    <div class="col-6">
                      <label for="countdownFinishZone0" class="form-label">On finish</label>
                      <select id="countdownFinishZone0" class="form-select">
                        <option value="blinkForever">Blink forever</option>
                        <option value="blink3">Blink 3 times</option>
                        <option value="none">Static</option>
                      </select>
                    </div>
                    <div class="col-6">
                      <label for="countdownPrefixZone0" class="form-label">Prefix text</label>
                      <input type="text" class="form-control" id="countdownPrefixZone0" maxlength="10">
                    </div>
                    <div class="col-6">
                      <label for="countdownSuffixZone0" class="form-label">Suffix text</label>
                      <input type="text" class="form-control" id="countdownSuffixZone0" maxlength="10">
                    </div>
                    <div class="col-12">
                      <div class="form-check form-switch pt-2">
                        <input class="form-check-input" type="checkbox" id="countdownShowUnitsZone0">
                        <label class="form-check-label" for="countdownShowUnitsZone0">Show units (d, h, m, s)</label>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-5" id="fontZone0div">
                  <label for="fontZone0" class="form-label">Font</label>
                  <select id="fontZone0" class="form-select">
                    <option value="default">Default</option>
                    <option value="wledFont">Wled font</option>
                    <option value="wledFont_cyrillic">Cyrillic</option>
                    <option value="wledSymbolFont">Wled Symbol Font</option>
                    <option value="wledFont_CompactSymbols">Compact + Symbols</option>
                  </select>
                </div>
                <div class="col-7">
                  <label for="charspacingZone0" class="form-label">Character spacing</label>
                  <select id="charspacingZone0" class="form-select">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                  </select>
                </div>

                <div class="col-5" id="scrollEffectZone0InDiv">
                  <label for="scrollEffectZone0In" class="form-label">Scroll effect <span
                      class="text-primary"><b>IN</b></span></label>
                  <select id="scrollEffectZone0In" class="form-select">
                    <option value="PA_NO_EFFECT">NO_EFFECT</option>
                    <option value="PA_PRINT">PRINT</option>
                    <option value="PA_SCROLL_UP">SCROLL_UP</option>
                    <option value="PA_SCROLL_DOWN">SCROLL_DOWN</option>
                    <option value="PA_SCROLL_LEFT">SCROLL_LEFT</option>
                    <option value="PA_SCROLL_RIGHT">SCROLL_RIGHT</option>

                    <option value="PA_SLICE">SLICE</option>
                    <option value="PA_MESH">MESH</option>
                    <option value="PA_FADE">FADE</option>
                    <option value="PA_DISSOLVE">DISSOLVE</option>
                    <option value="PA_BLINDS">BLINDS</option>
                    <option value="PA_RANDOM">RANDOM</option>
                    <option value="PA_WIPE">WIPE</option>
                    <option value="PA_WIPE_CURSOR">WIPE_CURSOR</option>
                    <option value="PA_SCAN_HORIZ">SCAN_HORIZ</option>
                    <option value="PA_SCAN_VERT">SCAN_VERT</option>
                    <option value="PA_OPENING">OPENING</option>
                    <option value="PA_OPENING_CURSOR">OPENING_CURSOR</option>
                    <option value="PA_CLOSING">CLOSING</option>
                    <option value="PA_CLOSING_CURSOR">CLOSING_CURSOR</option>
                    <option value="PA_SCROLL_UP_LEFT">SCROLL_UP_LEFT</option>
                    <option value="PA_SCROLL_UP_RIGHT">SCROLL_UP_RIGHT</option>
                    <option value="PA_SCROLL_DOWN_LEFT">SCROLL_DOWN_LEFT</option>
                    <option value="PA_SCROLL_DOWN_RIGHT">SCROLL_DOWN_RIGHT</option>
                    <option value="PA_GROW_UP">GROW_UP</option>
                    <option value="PA_GROW_DOWN">GROW_DOWN</option>
                    <option value="PACMAN">Pacman</option>
                    <option value="WAVE">Wave</option>
                    <option value="ROLL">Roll</option>
                    <option value="LINES">Lines</option>
                    <option value="ARROW">Arrow</option>
                    <option value="SAILBOAT">Sailboat</option>
                    <option value="STEAMBOAT">Steamboat</option>
                    <option value="HEART">Heart</option>
                    <option value="INVADER">Invader</option>
                    <option value="ROCKET">Rocket</option>
                    <option value="FBALL">Fireball</option>
                    <option value="CHEVRON">Chevron</option>
                    <option value="WALKER">Walker</option>
                    <option value="MARIO">Mario</option>
                    <option value="GHOST">Ghost</option>
                    <option value="DINO">Dino</option>
                  </select>
                </div>
                <div class="col-7" id="scrollSpeedZone0Div">
                  <label for="scrollSpeedZone0" class="form-label">Scroll speed</label>
                  <div class="input-group mb-3">
                    <input type="text" class="form-control" id="scrollSpeedZone0"
                      aria-describedby="scrollSpeedZone0Help">
                    <span class="input-group-text">ms</span>
                  </div>
                </div>

                <div class="col-5" id="scrollEffectZone0OutDiv">
                  <label for="scrollEffectZone0Out" class="form-label">Scroll effect <span
                      class="text-primary"><b>OUT</b></span></label>
                  <select id="scrollEffectZone0Out" class="form-select">
                    <option value="PA_NO_EFFECT">NO_EFFECT</option>
                    <option value="PA_PRINT">PRINT</option>
                    <option value="PA_SCROLL_UP">SCROLL_UP</option>
                    <option value="PA_SCROLL_DOWN">SCROLL_DOWN</option>
                    <option value="PA_SCROLL_LEFT" selected>SCROLL_LEFT</option>
                    <option value="PA_SCROLL_RIGHT">SCROLL_RIGHT</option>
                    <option value="PACMAN">Pacman</option>
                    <option value="WAVE">Wave</option>
                    <option value="ROLL">Roll</option>
                    <option value="LINES">Lines</option>
                    <option value="ARROW">Arrow</option>
                    <option value="SAILBOAT">Sailboat</option>
                    <option value="STEAMBOAT">Steamboat</option>
                    <option value="HEART">Heart</option>
                    <option value="INVADER">Invader</option>
                    <option value="ROCKET">Rocket</option>
                    <option value="FBALL">Fireball</option>
                    <option value="CHEVRON">Chevron</option>
                    <option value="WALKER">Walker</option>
                    <option value="MARIO">Mario</option>
                    <option value="GHOST">Ghost</option>
                    <option value="DINO">Dino</option>
                    <option value="PA_SLICE">SLICE</option>
                    <option value="PA_MESH">MESH</option>
                    <option value="PA_FADE">FADE</option>
                    <option value="PA_DISSOLVE">DISSOLVE</option>
                    <option value="PA_BLINDS">BLINDS</option>
                    <option value="PA_RANDOM">RANDOM</option>
                    <option value="PA_WIPE">WIPE</option>
                    <option value="PA_WIPE_CURSOR">WIPE_CURSOR</option>
                    <option value="PA_SCAN_HORIZ">SCAN_HORIZ</option>
                    <option value="PA_SCAN_VERT">SCAN_VERT</option>
                    <option value="PA_OPENING">OPENING</option>
                    <option value="PA_OPENING_CURSOR">OPENING_CURSOR</option>
                    <option value="PA_CLOSING">CLOSING</option>
                    <option value="PA_CLOSING_CURSOR">CLOSING_CURSOR</option>
                    <option value="PA_SCROLL_UP_LEFT">SCROLL_UP_LEFT</option>
                    <option value="PA_SCROLL_UP_RIGHT">SCROLL_UP_RIGHT</option>
                    <option value="PA_SCROLL_DOWN_LEFT">SCROLL_DOWN_LEFT</option>
                    <option value="PA_SCROLL_DOWN_RIGHT">SCROLL_DOWN_RIGHT</option>
                    <option value="PA_GROW_UP">GROW_UP</option>
                    <option value="PA_GROW_DOWN">GROW_DOWN</option>
                  </select>
                </div>
                <div class="col-7" id="scrollPauseZone0Div">
                  <label for="scrollPauseZone0" class="form-label">Scroll pause</label>
                  <div class="input-group mb-3">
                    <input type="text" class="form-control" id="scrollPauseZone0">
                    <span class="input-group-text">s</span>
                  </div>
                </div>

                <div class="col-5" id="scrollAlignZone0Div">
                  <label for="scrollAlignZone0" class="form-label">Alignment</label>
                  <select id="scrollAlignZone0" class="form-select">
                    <option value="PA_LEFT">Left</option>
                    <option value="PA_CENTER">Center</option>
                    <option value="PA_RIGHT">Right</option>
                  </select>
                </div>


                <button id="zone0Settings" class="w-100 btn btn-primary btn-lg"
                  onClick="preparePostRequest(event, this.id, null);">Apply</button>

                <div id="zone1Wrapper" class="row g-3">
                  <div class="col-12">
                    <hr class="my-4">
                  </div>
                  <div class="col-12">
                    <h3 class="mb-3">Zone 1</h3>
                  </div>

                  <div class="col-5">
                    <label for="workModeZone1" class="form-label">Working mode</label>
                    <select id="workModeZone1" class="form-select">
                      <option value="mqttClient">MQTT client</option>
                      <option value="manualInput">Manual input</option>
                      <option value="wallClock">Wall clock</option>
                      <option value="owmWeather">Open Weather map</option>
                      <option value="haClient">Home Assistant client</option>
                      <option value="intTempSensor">Internal Temperature sensor (ds18b20)</option>
                      <option value="wopr">WOPR Mode (WarGames)</option>
                      <option value="countdown">Countdown timer</option>
                      <option value="stockTicker">Stock Ticker</option>
                    </select>
                  </div>

                  <div class="col-7" id="emptyZone1Div"></div>
                  <div class="col-7" id="stockDisplayFormatZone1Div" style="display: none;">
                    <label for="stockDisplayFormatZone1" class="form-label">Display format</label>
                    <select id="stockDisplayFormatZone1" class="form-select">
                      <option value="namePrice">Name + Price</option>
                      <option value="priceOnly">Price only</option>
                      <option value="changePct">Name + % Change</option>
                      <option value="pctOnly">% only</option>
                    </select>
                  </div>
                  <div class="col-7" id="countdownTargetZone1Div" style="display: none;">
                    <label for="countdownTargetZone1" class="form-label">Target date/time</label>
                    <input type="datetime-local" class="form-control" id="countdownTargetZone1" step="1">
                  </div>
                  <div class="col-5" id="mqttZone1PrefixDiv" style="display: none;">
                    <label for="mqttZone1Prefix" class="form-label">MQTT zone text topic</label>
                    <input type="text" class="form-control" id="mqttTextTopicZone1">
                  </div>
                  <div class="col-2" id="mqttPostfixZone1Div" style="display: none;">
                    <label for="mqttPostfixZone1" class="form-label">Postfix</label>
                    <input type="text" class="form-control" id="mqttPostfixZone1">
                  </div>
                  <div class="col-7" id="clockDisplayFormatZone1Div" style="display: none;">
                    <label for="clockDisplayFormatZone1" class="form-label">Time format</label>
                    <select id="clockDisplayFormatZone1" class="form-select">
                      <option value="HHMM">HH:MM</option>
                      <option value="HHMMSS">HH:MM:SS</option>
                      <option value="HH">HH</option>
                      <option value="MM">MM</option>
                      <option value="ddmmyyyy">dd.mm.yyyy</option>
                      <option value="ddmm">dd.mm</option>
                      <option value="ddmmaa">dd.mm aa</option>
                      <option value="aa">aa</option>
                      <option value="ddmmaahhmm">ddmmaahhmm</option>
                    </select>
                  </div>
                  <div class="col-12">
                    <div class="d-flex gap-4">
                      <div id="scrollInfiniteZone1Div" style="display: none;">
                        <div class="form-check form-switch pt-2">
                          <input class="form-check-input" type="checkbox" id="scrollInfiniteZone1"
                            onChange="preparePostRequest(event, this.id, this.checked);">
                          <label class="form-check-label" for="scrollInfiniteZone1">Infinite Scroll</label>
                        </div>
                      </div>
                      <div id="stockShowArrowsZone1Div" style="display: none;">
                        <div class="form-check form-switch pt-2">
                          <input class="form-check-input" type="checkbox" id="stockShowArrowsZone1">
                          <label class="form-check-label" for="stockShowArrowsZone1">Show price change arrows</label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-7" id="owmWhatToDisplayZone1div" style="display: none;">
                    <label for="owmWhatToDisplayZone1" class="form-label">What to display</label>
                    <select id="owmWhatToDisplayZone1" class="form-select">
                      <option value="owmTemperature">Temperature</option>
                      <option value="owmHumidity">Humidity</option>
                      <option value="owmPressure">Pressure</option>
                      <option value="owmWindSpeed">Wind speed</option>
                      <option value="owmWeatherIcon">Wether icon</option>
                    </select>
                  </div>
                  <div class="col-5" id="haSensorIdZone1Div" style="display: none;">
                    <label for="haSensorIdZone1" class="form-label">Sensor ID</label>
                    <input type="text" class="form-control" id="haSensorIdZone1">
                  </div>
                  <div class="col-2" id="haSensorPostfixZone1Div" style="display: none;">
                    <label for="haSensorPostfixZone1" class="form-label">Postfix</label>
                    <input type="text" class="form-control" id="haSensorPostfixZone1">
                  </div>
                  <div class="col-7" id="ds18b20PostfixZone1Div" style="display: none;">
                    <label for="ds18b20PostfixZone1" class="form-label">Postfix</label>
                    <input type="text" class="form-control" id="ds18b20PostfixZone1">
                  </div>
                  <div id="stockSymbolsZone1Div" style="display: none;">
                    <div class="row g-2">
                      <div class="col-12">
                        <label for="stockSymbolsZone1" class="form-label">Stock symbols (comma separated)</label>
                        <input type="text" class="form-control" id="stockSymbolsZone1" placeholder="AAPL,GOOG,TSLA">
                      </div>
                      <div class="col-6">
                        <label for="stockPrefixZone1" class="form-label">Prefix</label>
                        <input type="text" class="form-control" id="stockPrefixZone1">
                      </div>
                      <div class="col-6">
                        <label for="stockPostfixZone1" class="form-label">Postfix</label>
                        <input type="text" class="form-control" id="stockPostfixZone1">
                      </div>

                    </div>
                  </div>
                  <!-- Countdown settings Zone 1 -->
                  <div id="countdownSettingsZone1Div" style="display: none;">
                    <div class="row g-2">
                      <div class="col-6">
                        <label for="countdownFormatZone1" class="form-label">Display format</label>
                        <select id="countdownFormatZone1" class="form-select">
                          <option value="auto">Auto</option>
                          <option value="YY">YY</option>
                          <option value="YYMM">YY MM</option>
                          <option value="YYMMDDHHMM">YY MM DD HH MM</option>
                          <option value="YYMMDDHHMMSS">YY MM DD HH MM SS</option>
                          <option value="DD">DD</option>
                          <option value="DDHH">DD HH</option>
                          <option value="DDHHMM">DD HH MM</option>
                          <option value="DDHHMMSS">DD HH MM SS</option>
                          <option value="DDMM">DD MM</option>
                          <option value="HH">HH</option>
                          <option value="HHMM">HH MM</option>
                          <option value="HHMMSS">HH MM SS</option>
                          <option value="MM">MM</option>
                          <option value="MMSS">MM SS</option>
                          <option value="SS">SS</option>
                        </select>
                      </div>
                      <div class="col-6">
                        <label for="countdownFinishZone1" class="form-label">On finish</label>
                        <select id="countdownFinishZone1" class="form-select">
                          <option value="blinkForever">Blink forever</option>
                          <option value="blink3">Blink 3 times</option>
                          <option value="none">Static</option>
                        </select>
                      </div>
                      <div class="col-6">
                        <label for="countdownPrefixZone1" class="form-label">Prefix text</label>
                        <input type="text" class="form-control" id="countdownPrefixZone1" maxlength="10">
                      </div>
                      <div class="col-6">
                        <label for="countdownSuffixZone1" class="form-label">Suffix text</label>
                        <input type="text" class="form-control" id="countdownSuffixZone1" maxlength="10">
                      </div>
                      <div class="col-12">
                        <div class="form-check form-switch pt-2">
                          <input class="form-check-input" type="checkbox" id="countdownShowUnitsZone1">
                          <label class="form-check-label" for="countdownShowUnitsZone1">Show units (d, h, m, s)</label>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="col-5" id="fontZone1div">
                    <label for="fontZone1" class="form-label">Font</label>
                    <select id="fontZone1" class="form-select">
                      <option value="default">Default</option>
                      <option value="wledFont">Wled font</option>
                      <option value="wledFont_cyrillic">Cyrillic</option>
                      <option value="wledSymbolFont">Wled Symbol Font</option>
                      <option value="wledFont_CompactSymbols">Compact + Symbols</option>
                    </select>
                  </div>
                  <div class="col-7">
                    <label for="charspacingZone1" class="form-label">Character spacing</label>
                    <select id="charspacingZone1" class="form-select">
                      <option value="0">0</option>
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                    </select>
                  </div>

                  <div class="col-5" id="scrollEffectZone1InDiv">
                    <label for="scrollEffectZone1In" class="form-label">Scroll effect <span
                        class="text-primary"><b>IN</b></span></label>
                    <select id="scrollEffectZone1In" class="form-select">
                      <option value="PA_NO_EFFECT">NO_EFFECT</option>
                      <option value="PA_PRINT">PRINT</option>
                      <option value="PA_SCROLL_UP">SCROLL_UP</option>
                      <option value="PA_SCROLL_DOWN">SCROLL_DOWN</option>
                      <option value="PA_SCROLL_LEFT">SCROLL_LEFT</option>
                      <option value="PA_SCROLL_RIGHT">SCROLL_RIGHT</option>

                      <option value="PA_SLICE">SLICE</option>
                      <option value="PA_MESH">MESH</option>
                      <option value="PA_FADE">FADE</option>
                      <option value="PA_DISSOLVE">DISSOLVE</option>
                      <option value="PA_BLINDS">BLINDS</option>
                      <option value="PA_RANDOM">RANDOM</option>
                      <option value="PA_WIPE">WIPE</option>
                      <option value="PA_WIPE_CURSOR">WIPE_CURSOR</option>
                      <option value="PA_SCAN_HORIZ">SCAN_HORIZ</option>
                      <option value="PA_SCAN_VERT">SCAN_VERT</option>
                      <option value="PA_OPENING">OPENING</option>
                      <option value="PA_OPENING_CURSOR">OPENING_CURSOR</option>
                      <option value="PA_CLOSING">CLOSING</option>
                      <option value="PA_CLOSING_CURSOR">CLOSING_CURSOR</option>
                      <option value="PA_SCROLL_UP_LEFT">SCROLL_UP_LEFT</option>
                      <option value="PA_SCROLL_UP_RIGHT">SCROLL_UP_RIGHT</option>
                      <option value="PA_SCROLL_DOWN_LEFT">SCROLL_DOWN_LEFT</option>
                      <option value="PA_SCROLL_DOWN_RIGHT">SCROLL_DOWN_RIGHT</option>
                      <option value="PA_GROW_UP">GROW_UP</option>
                      <option value="PA_GROW_DOWN">GROW_DOWN</option>
                    </select>
                  </div>
                  <div class="col-7" id="scrollSpeedZone1Div">
                    <label for="scrollSpeedZone1" class="form-label">Scroll speed</label>
                    <div class="input-group mb-3">
                      <input type="text" class="form-control" id="scrollSpeedZone1"
                        aria-describedby="scrollSpeedZone1Help">
                      <span class="input-group-text">ms</span>
                    </div>
                  </div>

                  <div class="col-5" id="scrollEffectZone1OutDiv">
                    <label for="scrollEffectZone1Out" class="form-label">Scroll effect <span
                        class="text-primary"><b>OUT</b></span></label>
                    <select id="scrollEffectZone1Out" class="form-select">
                      <option value="PA_NO_EFFECT">NO_EFFECT</option>
                      <option value="PA_PRINT">PRINT</option>
                      <option value="PA_SCROLL_UP">SCROLL_UP</option>
                      <option value="PA_SCROLL_DOWN">SCROLL_DOWN</option>
                      <option value="PA_SCROLL_LEFT" selected>SCROLL_LEFT</option>
                      <option value="PA_SCROLL_RIGHT">SCROLL_RIGHT</option>
                      <option value="PACMAN">Pacman</option>
                      <option value="WAVE">Wave</option>
                      <option value="ROLL">Roll</option>
                      <option value="LINES">Lines</option>
                      <option value="ARROW">Arrow</option>
                      <option value="SAILBOAT">Sailboat</option>
                      <option value="STEAMBOAT">Steamboat</option>
                      <option value="HEART">Heart</option>
                      <option value="INVADER">Invader</option>
                      <option value="ROCKET">Rocket</option>
                      <option value="FBALL">Fireball</option>
                      <option value="CHEVRON">Chevron</option>
                      <option value="WALKER">Walker</option>
                      <option value="PA_SLICE">SLICE</option>
                      <option value="PA_MESH">MESH</option>
                      <option value="PA_FADE">FADE</option>
                      <option value="PA_DISSOLVE">DISSOLVE</option>
                      <option value="PA_BLINDS">BLINDS</option>
                      <option value="PA_RANDOM">RANDOM</option>
                      <option value="PA_WIPE">WIPE</option>
                      <option value="PA_WIPE_CURSOR">WIPE_CURSOR</option>
                      <option value="PA_SCAN_HORIZ">SCAN_HORIZ</option>
                      <option value="PA_SCAN_VERT">SCAN_VERT</option>
                      <option value="PA_OPENING">OPENING</option>
                      <option value="PA_OPENING_CURSOR">OPENING_CURSOR</option>
                      <option value="PA_CLOSING">CLOSING</option>
                      <option value="PA_CLOSING_CURSOR">CLOSING_CURSOR</option>
                      <option value="PA_SCROLL_UP_LEFT">SCROLL_UP_LEFT</option>
                      <option value="PA_SCROLL_UP_RIGHT">SCROLL_UP_RIGHT</option>
                      <option value="PA_SCROLL_DOWN_LEFT">SCROLL_DOWN_LEFT</option>
                      <option value="PA_SCROLL_DOWN_RIGHT">SCROLL_DOWN_RIGHT</option>
                      <option value="PA_GROW_UP">GROW_UP</option>
                      <option value="PA_GROW_DOWN">GROW_DOWN</option>
                    </select>
                  </div>
                  <div class="col-7" id="scrollPauseZone1Div">
                    <label for="scrollPauseZone1" class="form-label">Scroll pause</label>
                    <div class="input-group mb-3">
                      <input type="text" class="form-control" id="scrollPauseZone1">
                      <span class="input-group-text">s</span>
                    </div>
                  </div>

                  <div class="col-5" id="scrollAlignZone1Div">
                    <label for="scrollAlignZone1" class="form-label">Alignment</label>
                    <select id="scrollAlignZone1" class="form-select">
                      <option value="PA_LEFT">Left</option>
                      <option value="PA_CENTER">Center</option>
                      <option value="PA_RIGHT">Right</option>
                    </select>
                  </div>


                  <button id="zone1Settings" class="w-100 btn btn-primary btn-lg"
                    onClick="preparePostRequest(event, this.id, null);">Apply</button>
                </div>

                <div id="zone2Wrapper" class="row g-3">
                  <div class="col-12">
                    <hr class="my-4">
                  </div>
                  <div class="col-12">
                    <h3 class="mb-3">Zone 2</h3>
                  </div>

                  <div class="col-5">
                    <label for="workModeZone2" class="form-label">Working mode</label>
                    <select id="workModeZone2" class="form-select">
                      <option value="mqttClient">MQTT client</option>
                      <option value="manualInput">Manual input</option>
                      <option value="wallClock">Wall clock</option>
                      <option value="owmWeather">Open Weather map</option>
                      <option value="haClient">Home Assistant client</option>
                      <option value="intTempSensor">Internal Temperature sensor (ds18b20)</option>
                      <option value="wopr">WOPR Mode (WarGames)</option>
                      <option value="countdown">Countdown timer</option>
                      <option value="stockTicker">Stock Ticker</option>
                    </select>
                  </div>

                  <div class="col-7" id="emptyZone2Div"></div>
                  <div class="col-7" id="stockDisplayFormatZone2Div" style="display: none;">
                    <label for="stockDisplayFormatZone2" class="form-label">Display format</label>
                    <select id="stockDisplayFormatZone2" class="form-select">
                      <option value="namePrice">Name + Price</option>
                      <option value="priceOnly">Price only</option>
                      <option value="changePct">Name + % Change</option>
                      <option value="pctOnly">% only</option>
                    </select>
                  </div>
                  <div class="col-7" id="countdownTargetZone2Div" style="display: none;">
                    <label for="countdownTargetZone2" class="form-label">Target date/time</label>
                    <input type="datetime-local" class="form-control" id="countdownTargetZone2" step="1">
                  </div>
                  <div class="col-5" id="mqttZone2PrefixDiv" style="display: none;">
                    <label for="mqttZone2Prefix" class="form-label">MQTT zone text topic</label>
                    <input type="text" class="form-control" id="mqttTextTopicZone2">
                  </div>
                  <div class="col-2" id="mqttPostfixZone2Div" style="display: none;">
                    <label for="mqttPostfixZone2" class="form-label">Postfix</label>
                    <input type="text" class="form-control" id="mqttPostfixZone2">
                  </div>
                  <div class="col-7" id="clockDisplayFormatZone2Div" style="display: none;">
                    <label for="clockDisplayFormatZone2" class="form-label">Time format</label>
                    <select id="clockDisplayFormatZone2" class="form-select">
                      <option value="HHMM">HH:MM</option>
                      <option value="HHMMSS">HH:MM:SS</option>
                      <option value="HH">HH</option>
                      <option value="MM">MM</option>
                      <option value="ddmmyyyy">dd.mm.yyyy</option>
                      <option value="ddmm">dd.mm</option>
                      <option value="ddmmaa">dd.mm aa</option>
                      <option value="aa">aa</option>
                      <option value="ddmmaahhmm">ddmmaahhmm</option>
                    </select>
                  </div>
                  <div class="col-12">
                    <div class="d-flex gap-4">
                      <div id="scrollInfiniteZone2Div" style="display: none;">
                        <div class="form-check form-switch pt-2">
                          <input class="form-check-input" type="checkbox" id="scrollInfiniteZone2"
                            onChange="preparePostRequest(event, this.id, this.checked);">
                          <label class="form-check-label" for="scrollInfiniteZone2">Infinite Scroll</label>
                        </div>
                      </div>
                      <div id="stockShowArrowsZone2Div" style="display: none;">
                        <div class="form-check form-switch pt-2">
                          <input class="form-check-input" type="checkbox" id="stockShowArrowsZone2">
                          <label class="form-check-label" for="stockShowArrowsZone2">Show price change arrows</label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-7" id="owmWhatToDisplayZone2div" style="display: none;">
                    <label for="owmWhatToDisplayZone2" class="form-label">What to display</label>
                    <select id="owmWhatToDisplayZone2" class="form-select">
                      <option value="owmTemperature">Temperature</option>
                      <option value="owmHumidity">Humidity</option>
                      <option value="owmPressure">Pressure</option>
                      <option value="owmWindSpeed">Wind speed</option>
                      <option value="owmWeatherIcon">Wether icon</option>
                    </select>
                  </div>
                  <div class="col-5" id="haSensorIdZone2Div" style="display: none;">
                    <label for="haSensorIdZone2" class="form-label">Sensor ID</label>
                    <input type="text" class="form-control" id="haSensorIdZone2">
                  </div>
                  <div class="col-2" id="haSensorPostfixZone2Div" style="display: none;">
                    <label for="haSensorPostfixZone2" class="form-label">Postfix</label>
                    <input type="text" class="form-control" id="haSensorPostfixZone2">
                  </div>
                  <div class="col-7" id="ds18b20PostfixZone2Div" style="display: none;">
                    <label for="ds18b20PostfixZone2" class="form-label">Postfix</label>
                    <input type="text" class="form-control" id="ds18b20PostfixZone2">
                  </div>
                  <div id="stockSymbolsZone2Div" style="display: none;">
                    <div class="row g-2">
                      <div class="col-12">
                        <label for="stockSymbolsZone2" class="form-label">Stock symbols (comma separated)</label>
                        <input type="text" class="form-control" id="stockSymbolsZone2" placeholder="AAPL,GOOG,TSLA">
                      </div>
                      <div class="col-6">
                        <label for="stockPrefixZone2" class="form-label">Prefix</label>
                        <input type="text" class="form-control" id="stockPrefixZone2">
                      </div>
                      <div class="col-6">
                        <label for="stockPostfixZone2" class="form-label">Postfix</label>
                        <input type="text" class="form-control" id="stockPostfixZone2">
                      </div>

                    </div>
                  </div>
                  <!-- Countdown settings Zone 2 -->
                  <div id="countdownSettingsZone2Div" style="display: none;">
                    <div class="row g-2">
                      <div class="col-6">
                        <label for="countdownFormatZone2" class="form-label">Display format</label>
                        <select id="countdownFormatZone2" class="form-select">
                          <option value="auto">Auto</option>
                          <option value="YY">YY</option>
                          <option value="YYMM">YY MM</option>
                          <option value="YYMMDDHHMM">YY MM DD HH MM</option>
                          <option value="YYMMDDHHMMSS">YY MM DD HH MM SS</option>
                          <option value="DD">DD</option>
                          <option value="DDHH">DD HH</option>
                          <option value="DDHHMM">DD HH MM</option>
                          <option value="DDHHMMSS">DD HH MM SS</option>
                          <option value="DDMM">DD MM</option>
                          <option value="HH">HH</option>
                          <option value="HHMM">HH MM</option>
                          <option value="HHMMSS">HH MM SS</option>
                          <option value="MM">MM</option>
                          <option value="MMSS">MM SS</option>
                          <option value="SS">SS</option>
                        </select>
                      </div>
                      <div class="col-6">
                        <label for="countdownFinishZone2" class="form-label">On finish</label>
                        <select id="countdownFinishZone2" class="form-select">
                          <option value="blinkForever">Blink forever</option>
                          <option value="blink3">Blink 3 times</option>
                          <option value="none">Static</option>
                        </select>
                      </div>
                      <div class="col-6">
                        <label for="countdownPrefixZone2" class="form-label">Prefix text</label>
                        <input type="text" class="form-control" id="countdownPrefixZone2" maxlength="10">
                      </div>
                      <div class="col-6">
                        <label for="countdownSuffixZone2" class="form-label">Suffix text</label>
                        <input type="text" class="form-control" id="countdownSuffixZone2" maxlength="10">
                      </div>
                      <div class="col-12">
                        <div class="form-check form-switch pt-2">
                          <input class="form-check-input" type="checkbox" id="countdownShowUnitsZone2">
                          <label class="form-check-label" for="countdownShowUnitsZone2">Show units (d, h, m, s)</label>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="col-5" id="fontZone2div">
                    <label for="fontZone2" class="form-label">Font</label>
                    <select id="fontZone2" class="form-select">
                      <option value="default">Default</option>
                      <option value="wledFont">Wled font</option>
                      <option value="wledFont_cyrillic">Cyrillic</option>
                      <option value="wledSymbolFont">Wled Symbol Font</option>
                      <option value="wledFont_CompactSymbols">Compact + Symbols</option>
                    </select>
                  </div>
                  <div class="col-7">
                    <label for="charspacingZone2" class="form-label">Character spacing</label>
                    <select id="charspacingZone2" class="form-select">
                      <option value="0">0</option>
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                    </select>
                  </div>

                  <div class="col-5" id="scrollEffectZone2InDiv">
                    <label for="scrollEffectZone2In" class="form-label">Scroll effect <span
                        class="text-primary"><b>IN</b></span></label>
                    <select id="scrollEffectZone2In" class="form-select">
                      <option value="PA_NO_EFFECT">NO_EFFECT</option>
                      <option value="PA_PRINT">PRINT</option>
                      <option value="PA_SCROLL_UP">SCROLL_UP</option>
                      <option value="PA_SCROLL_DOWN">SCROLL_DOWN</option>
                      <option value="PA_SCROLL_LEFT">SCROLL_LEFT</option>
                      <option value="PA_SCROLL_RIGHT">SCROLL_RIGHT</option>
                      <option value="PACMAN">Pacman</option>
                      <option value="WAVE">Wave</option>
                      <option value="ROLL">Roll</option>
                      <option value="LINES">Lines</option>
                      <option value="ARROW">Arrow</option>
                      <option value="SAILBOAT">Sailboat</option>
                      <option value="STEAMBOAT">Steamboat</option>
                      <option value="HEART">Heart</option>
                      <option value="INVADER">Invader</option>
                      <option value="ROCKET">Rocket</option>
                      <option value="FBALL">Fireball</option>
                      <option value="CHEVRON">Chevron</option>
                      <option value="WALKER">Walker</option>
                      <option value="PA_SLICE">SLICE</option>
                      <option value="PA_MESH">MESH</option>
                      <option value="PA_FADE">FADE</option>
                      <option value="PA_DISSOLVE">DISSOLVE</option>
                      <option value="PA_BLINDS">BLINDS</option>
                      <option value="PA_RANDOM">RANDOM</option>
                      <option value="PA_WIPE">WIPE</option>
                      <option value="PA_WIPE_CURSOR">WIPE_CURSOR</option>
                      <option value="PA_SCAN_HORIZ">SCAN_HORIZ</option>
                      <option value="PA_SCAN_VERT">SCAN_VERT</option>
                      <option value="PA_OPENING">OPENING</option>
                      <option value="PA_OPENING_CURSOR">OPENING_CURSOR</option>
                      <option value="PA_CLOSING">CLOSING</option>
                      <option value="PA_CLOSING_CURSOR">CLOSING_CURSOR</option>
                      <option value="PA_SCROLL_UP_LEFT">SCROLL_UP_LEFT</option>
                      <option value="PA_SCROLL_UP_RIGHT">SCROLL_UP_RIGHT</option>
                      <option value="PA_SCROLL_DOWN_LEFT">SCROLL_DOWN_LEFT</option>
                      <option value="PA_SCROLL_DOWN_RIGHT">SCROLL_DOWN_RIGHT</option>
                      <option value="PA_GROW_UP">GROW_UP</option>
                      <option value="PA_GROW_DOWN">GROW_DOWN</option>
                    </select>
                  </div>
                  <div class="col-7" id="scrollSpeedZone2Div">
                    <label for="scrollSpeedZone2" class="form-label">Scroll speed</label>
                    <div class="input-group mb-3">
                      <input type="text" class="form-control" id="scrollSpeedZone2"
                        aria-describedby="scrollSpeedZone2Help">
                      <span class="input-group-text">ms</span>
                    </div>
                  </div>

                  <div class="col-5" id="scrollEffectZone2OutDiv">
                    <label for="scrollEffectZone2Out" class="form-label">Scroll effect <span
                        class="text-primary"><b>OUT</b></span></label>
                    <select id="scrollEffectZone2Out" class="form-select">
                      <option value="PA_NO_EFFECT">NO_EFFECT</option>
                      <option value="PA_PRINT">PRINT</option>
                      <option value="PA_SCROLL_UP">SCROLL_UP</option>
                      <option value="PA_SCROLL_DOWN">SCROLL_DOWN</option>
                      <option value="PA_SCROLL_LEFT" selected>SCROLL_LEFT</option>
                      <option value="PA_SCROLL_RIGHT">SCROLL_RIGHT</option>
                      <option value="PACMAN">Pacman</option>
                      <option value="WAVE">Wave</option>
                      <option value="ROLL">Roll</option>
                      <option value="LINES">Lines</option>
                      <option value="ARROW">Arrow</option>
                      <option value="SAILBOAT">Sailboat</option>
                      <option value="STEAMBOAT">Steamboat</option>
                      <option value="HEART">Heart</option>
                      <option value="INVADER">Invader</option>
                      <option value="ROCKET">Rocket</option>
                      <option value="FBALL">Fireball</option>
                      <option value="CHEVRON">Chevron</option>
                      <option value="WALKER">Walker</option>
                      <option value="PA_SLICE">SLICE</option>
                      <option value="PA_MESH">MESH</option>
                      <option value="PA_FADE">FADE</option>
                      <option value="PA_DISSOLVE">DISSOLVE</option>
                      <option value="PA_BLINDS">BLINDS</option>
                      <option value="PA_RANDOM">RANDOM</option>
                      <option value="PA_WIPE">WIPE</option>
                      <option value="PA_WIPE_CURSOR">WIPE_CURSOR</option>
                      <option value="PA_SCAN_HORIZ">SCAN_HORIZ</option>
                      <option value="PA_SCAN_VERT">SCAN_VERT</option>
                      <option value="PA_OPENING">OPENING</option>
                      <option value="PA_OPENING_CURSOR">OPENING_CURSOR</option>
                      <option value="PA_CLOSING">CLOSING</option>
                      <option value="PA_CLOSING_CURSOR">CLOSING_CURSOR</option>
                      <option value="PA_SCROLL_UP_LEFT">SCROLL_UP_LEFT</option>
                      <option value="PA_SCROLL_UP_RIGHT">SCROLL_UP_RIGHT</option>
                      <option value="PA_SCROLL_DOWN_LEFT">SCROLL_DOWN_LEFT</option>
                      <option value="PA_SCROLL_DOWN_RIGHT">SCROLL_DOWN_RIGHT</option>
                      <option value="PA_GROW_UP">GROW_UP</option>
                      <option value="PA_GROW_DOWN">GROW_DOWN</option>
                    </select>
                  </div>
                  <div class="col-7" id="scrollPauseZone2Div">
                    <label for="scrollPauseZone2" class="form-label">Scroll pause</label>
                    <div class="input-group mb-3">
                      <input type="text" class="form-control" id="scrollPauseZone2">
                      <span class="input-group-text">s</span>
                    </div>
                  </div>

                  <div class="col-5" id="scrollAlignZone2Div">
                    <label for="scrollAlignZone2" class="form-label">Alignment</label>
                    <select id="scrollAlignZone2" class="form-select">
                      <option value="PA_LEFT">Left</option>
                      <option value="PA_CENTER">Center</option>
                      <option value="PA_RIGHT">Right</option>
                    </select>
                  </div>

                  <button id="zone2Settings" class="w-100 btn btn-primary btn-lg"
                    onClick="preparePostRequest(event, this.id, null);">Apply</button>
                </div>

                <div id="zone3WrapperPart1" class="row g-3">
                  <div class="col-12">
                    <hr class="my-4">
                  </div>
                  <div class="col-12">
                    <h3 class="mb-3">Zone 3</h3>
                  </div>

                  <div class="col-5">
                    <label for="workModeZone3" class="form-label">Working mode</label>
                    <select id="workModeZone3" class="form-select">
                      <option value="mqttClient">MQTT client</option>
                      <option value="manualInput">Manual input</option>
                      <option value="wallClock">Wall clock</option>
                      <option value="owmWeather">Open Weather map</option>
                      <option value="haClient">Home Assistant client</option>
                      <option value="intTempSensor">Internal Temperature sensor (ds18b20)</option>
                      <option value="wopr">WOPR Mode (WarGames)</option>
                      <option value="countdown">Countdown timer</option>
                      <option value="stockTicker">Stock Ticker</option>
                    </select>
                  </div>

                  <div class="col-7" id="emptyZone3Div"></div>
                  <div class="col-7" id="stockDisplayFormatZone3Div" style="display: none;">
                    <label for="stockDisplayFormatZone3" class="form-label">Display format</label>
                    <select id="stockDisplayFormatZone3" class="form-select">
                      <option value="namePrice">Name + Price</option>
                      <option value="priceOnly">Price only</option>
                      <option value="changePct">Name + % Change</option>
                      <option value="pctOnly">% only</option>
                    </select>
                  </div>
                  <div class="col-7" id="countdownTargetZone3Div" style="display: none;">
                    <label for="countdownTargetZone3" class="form-label">Target date/time</label>
                    <input type="datetime-local" class="form-control" id="countdownTargetZone3" step="1">
                  </div>
                  <div class="col-5" id="mqttZone3PrefixDiv" style="display: none;">
                    <label for="mqttZone3Prefix" class="form-label">MQTT zone text topic</label>
                    <input type="text" class="form-control" id="mqttTextTopicZone3">
                  </div>
                  <div class="col-2" id="mqttPostfixZone3Div" style="display: none;">
                    <label for="mqttPostfixZone3" class="form-label">Postfix</label>
                    <input type="text" class="form-control" id="mqttPostfixZone3">
                  </div>
                  <div class="col-7" id="clockDisplayFormatZone3Div" style="display: none;">
                    <label for="clockDisplayFormatZone3" class="form-label">Time format</label>
                    <select id="clockDisplayFormatZone3" class="form-select">
                      <option value="HHMM">HH:MM</option>
                      <option value="HHMMSS">HH:MM:SS</option>
                      <option value="HH">HH</option>
                      <option value="MM">MM</option>
                      <option value="ddmmyyyy">dd.mm.yyyy</option>
                      <option value="ddmm">dd.mm</option>
                      <option value="ddmmaa">dd.mm aa</option>
                      <option value="aa">aa</option>
                      <option value="ddmmaahhmm">ddmmaahhmm</option>
                    </select>
                  </div>
                  <div class="col-12">
                    <div class="d-flex gap-4">
                      <div id="scrollInfiniteZone3Div" style="display: none;">
                        <div class="form-check form-switch pt-2">
                          <input class="form-check-input" type="checkbox" id="scrollInfiniteZone3"
                            onChange="preparePostRequest(event, this.id, this.checked);">
                          <label class="form-check-label" for="scrollInfiniteZone3">Infinite Scroll</label>
                        </div>
                      </div>
                      <div id="stockShowArrowsZone3Div" style="display: none;">
                        <div class="form-check form-switch pt-2">
                          <input class="form-check-input" type="checkbox" id="stockShowArrowsZone3">
                          <label class="form-check-label" for="stockShowArrowsZone3">Show price change arrows</label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-7" id="owmWhatToDisplayZone3div" style="display: none;">
                    <label for="owmWhatToDisplayZone3" class="form-label">What to display</label>
                    <select id="owmWhatToDisplayZone3" class="form-select">
                      <option value="owmTemperature">Temperature</option>
                      <option value="owmHumidity">Humidity</option>
                      <option value="owmPressure">Pressure</option>
                      <option value="owmWindSpeed">Wind speed</option>
                      <option value="owmWeatherIcon">Wether icon</option>
                    </select>
                  </div>
                  <div class="col-5" id="haSensorIdZone3Div" style="display: none;">
                    <label for="haSensorIdZone3" class="form-label">Sensor ID</label>
                    <input type="text" class="form-control" id="haSensorIdZone3">
                  </div>
                  <div class="col-2" id="haSensorPostfixZone3Div" style="display: none;">
                    <label for="haSensorPostfixZone3" class="form-label">Postfix</label>
                    <input type="text" class="form-control" id="haSensorPostfixZone3">
                  </div>
                  <div class="col-7" id="ds18b20PostfixZone3Div" style="display: none;">
                    <label for="ds18b20PostfixZone3" class="form-label">Postfix</label>
                    <input type="text" class="form-control" id="ds18b20PostfixZone3">
                  </div>
                  <div id="stockSymbolsZone3Div" style="display: none;">
                    <div class="row g-2">
                      <div class="col-12">
                        <label for="stockSymbolsZone3" class="form-label">Stock symbols (comma separated)</label>
                        <input type="text" class="form-control" id="stockSymbolsZone3" placeholder="AAPL,GOOG,TSLA">
                      </div>
                      <div class="col-6">
                        <label for="stockPrefixZone3" class="form-label">Prefix</label>
                        <input type="text" class="form-control" id="stockPrefixZone3">
                      </div>
                      <div class="col-6">
                        <label for="stockPostfixZone3" class="form-label">Postfix</label>
                        <input type="text" class="form-control" id="stockPostfixZone3">
                      </div>

                    </div>
                  </div>
                  <!-- Countdown settings Zone 3 -->
                  <div id="countdownSettingsZone3Div" style="display: none;">
                    <div class="row g-2">
                      <div class="col-6">
                        <label for="countdownFormatZone3" class="form-label">Display format</label>
                        <select id="countdownFormatZone3" class="form-select">
                          <option value="auto">Auto</option>
                          <option value="YY">YY</option>
                          <option value="YYMM">YY MM</option>
                          <option value="YYMMDDHHMM">YY MM DD HH MM</option>
                          <option value="YYMMDDHHMMSS">YY MM DD HH MM SS</option>
                          <option value="DD">DD</option>
                          <option value="DDHH">DD HH</option>
                          <option value="DDHHMM">DD HH MM</option>
                          <option value="DDHHMMSS">DD HH MM SS</option>
                          <option value="DDMM">DD MM</option>
                          <option value="HH">HH</option>
                          <option value="HHMM">HH MM</option>
                          <option value="HHMMSS">HH MM SS</option>
                          <option value="MM">MM</option>
                          <option value="MMSS">MM SS</option>
                          <option value="SS">SS</option>
                        </select>
                      </div>
                      <div class="col-6">
                        <label for="countdownFinishZone3" class="form-label">On finish</label>
                        <select id="countdownFinishZone3" class="form-select">
                          <option value="blinkForever">Blink forever</option>
                          <option value="blink3">Blink 3 times</option>
                          <option value="none">Static</option>
                        </select>
                      </div>
                      <div class="col-6">
                        <label for="countdownPrefixZone3" class="form-label">Prefix text</label>
                        <input type="text" class="form-control" id="countdownPrefixZone3" maxlength="10">
                      </div>
                      <div class="col-6">
                        <label for="countdownSuffixZone3" class="form-label">Suffix text</label>
                        <input type="text" class="form-control" id="countdownSuffixZone3" maxlength="10">
                      </div>
                      <div class="col-12">
                        <div class="form-check form-switch pt-2">
                          <input class="form-check-input" type="checkbox" id="countdownShowUnitsZone3">
                          <label class="form-check-label" for="countdownShowUnitsZone3">Show units (d, h, m, s)</label>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="col-5" id="fontZone3div">
                    <label for="fontZone3" class="form-label">Font</label>
                    <select id="fontZone3" class="form-select">
                      <option value="default">Default</option>
                      <option value="wledFont">Wled font</option>
                      <option value="wledFont_cyrillic">Cyrillic</option>
                      <option value="wledSymbolFont">Wled Symbol Font</option>
                      <option value="wledFont_CompactSymbols">Compact + Symbols</option>
                    </select>
                  </div>
                  <div class="col-7">
                    <label for="charspacingZone3" class="form-label">Character spacing</label>
                    <select id="charspacingZone3" class="form-select">
                      <option value="0">0</option>
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                    </select>
                  </div>

                  <div class="col-5" id="scrollEffectZone3InDiv">
                    <label for="scrollEffectZone3In" class="form-label">Scroll effect <span
                        class="text-primary"><b>IN</b></span></label>
                    <select id="scrollEffectZone3In" class="form-select">
                      <option value="PA_NO_EFFECT">NO_EFFECT</option>
                      <option value="PA_PRINT">PRINT</option>
                      <option value="PA_SCROLL_UP">SCROLL_UP</option>
                      <option value="PA_SCROLL_DOWN">SCROLL_DOWN</option>
                      <option value="PA_SCROLL_LEFT">SCROLL_LEFT</option>
                      <option value="PA_SCROLL_RIGHT">SCROLL_RIGHT</option>
                      <option value="PACMAN">Pacman</option>
                      <option value="WAVE">Wave</option>
                      <option value="ROLL">Roll</option>
                      <option value="LINES">Lines</option>
                      <option value="ARROW">Arrow</option>
                      <option value="SAILBOAT">Sailboat</option>
                      <option value="STEAMBOAT">Steamboat</option>
                      <option value="HEART">Heart</option>
                      <option value="INVADER">Invader</option>
                      <option value="ROCKET">Rocket</option>
                      <option value="FBALL">Fireball</option>
                      <option value="CHEVRON">Chevron</option>
                      <option value="WALKER">Walker</option>
                      <option value="PA_SLICE">SLICE</option>
                      <option value="PA_MESH">MESH</option>
                      <option value="PA_FADE">FADE</option>
                      <option value="PA_DISSOLVE">DISSOLVE</option>
                      <option value="PA_BLINDS">BLINDS</option>
                      <option value="PA_RANDOM">RANDOM</option>
                      <option value="PA_WIPE">WIPE</option>
                      <option value="PA_WIPE_CURSOR">WIPE_CURSOR</option>
                      <option value="PA_SCAN_HORIZ">SCAN_HORIZ</option>
                      <option value="PA_SCAN_VERT">SCAN_VERT</option>
                      <option value="PA_OPENING">OPENING</option>
                      <option value="PA_OPENING_CURSOR">OPENING_CURSOR</option>
                      <option value="PA_CLOSING">CLOSING</option>
                      <option value="PA_CLOSING_CURSOR">CLOSING_CURSOR</option>
                      <option value="PA_SCROLL_UP_LEFT">SCROLL_UP_LEFT</option>
                      <option value="PA_SCROLL_UP_RIGHT">SCROLL_UP_RIGHT</option>
                      <option value="PA_SCROLL_DOWN_LEFT">SCROLL_DOWN_LEFT</option>
                      <option value="PA_SCROLL_DOWN_RIGHT">SCROLL_DOWN_RIGHT</option>
                      <option value="PA_GROW_UP">GROW_UP</option>
                      <option value="PA_GROW_DOWN">GROW_DOWN</option>
                    </select>
                  </div>
                  <div class="col-7" id="scrollSpeedZone3Div">
                    <label for="scrollSpeedZone3" class="form-label">Scroll speed</label>
                    <div class="input-group mb-3">
                      <input type="text" class="form-control" id="scrollSpeedZone3"
                        aria-describedby="scrollSpeedZone3Help">
                      <span class="input-group-text">ms</span>
                    </div>
                  </div>

                  <div class="col-5" id="scrollEffectZone3OutDiv">
                    <label for="scrollEffectZone3Out" class="form-label">Scroll effect <span
                        class="text-primary"><b>OUT</b></span></label>
                    <select id="scrollEffectZone3Out" class="form-select">
                      <option value="PA_NO_EFFECT">NO_EFFECT</option>
                      <option value="PA_PRINT">PRINT</option>
                      <option value="PA_SCROLL_UP">SCROLL_UP</option>
                      <option value="PA_SCROLL_DOWN">SCROLL_DOWN</option>
                      <option value="PA_SCROLL_LEFT" selected>SCROLL_LEFT</option>
                      <option value="PA_SCROLL_RIGHT">SCROLL_RIGHT</option>
                      <option value="PACMAN">Pacman</option>
                      <option value="WAVE">Wave</option>
                      <option value="ROLL">Roll</option>
                      <option value="LINES">Lines</option>
                      <option value="ARROW">Arrow</option>
                      <option value="SAILBOAT">Sailboat</option>
                      <option value="STEAMBOAT">Steamboat</option>
                      <option value="HEART">Heart</option>
                      <option value="INVADER">Invader</option>
                      <option value="ROCKET">Rocket</option>
                      <option value="FBALL">Fireball</option>
                      <option value="CHEVRON">Chevron</option>
                      <option value="WALKER">Walker</option>
                      <option value="PA_SLICE">SLICE</option>
                      <option value="PA_MESH">MESH</option>
                      <option value="PA_FADE">FADE</option>
                      <option value="PA_DISSOLVE">DISSOLVE</option>
                      <option value="PA_BLINDS">BLINDS</option>
                      <option value="PA_RANDOM">RANDOM</option>
                      <option value="PA_WIPE">WIPE</option>
                      <option value="PA_WIPE_CURSOR">WIPE_CURSOR</option>
                      <option value="PA_SCAN_HORIZ">SCAN_HORIZ</option>
                      <option value="PA_SCAN_VERT">SCAN_VERT</option>
                      <option value="PA_OPENING">OPENING</option>
                      <option value="PA_OPENING_CURSOR">OPENING_CURSOR</option>
                      <option value="PA_CLOSING">CLOSING</option>
                      <option value="PA_CLOSING_CURSOR">CLOSING_CURSOR</option>
                      <option value="PA_SCROLL_UP_LEFT">SCROLL_UP_LEFT</option>
                      <option value="PA_SCROLL_UP_RIGHT">SCROLL_UP_RIGHT</option>
                      <option value="PA_SCROLL_DOWN_LEFT">SCROLL_DOWN_LEFT</option>
                      <option value="PA_SCROLL_DOWN_RIGHT">SCROLL_DOWN_RIGHT</option>
                      <option value="PA_GROW_UP">GROW_UP</option>
                      <option value="PA_GROW_DOWN">GROW_DOWN</option>
                    </select>
                  </div>
                  <div class="col-7" id="scrollPauseZone3Div">
                    <label for="scrollPauseZone3" class="form-label">Scroll pause</label>
                    <div class="input-group mb-3">
                      <input type="text" class="form-control" id="scrollPauseZone3">
                      <span class="input-group-text">s</span>
                    </div>
                  </div>

                  <div class="col-5" id="scrollAlignZone3Div">
                    <label for="scrollAlignZone3" class="form-label">Alignment</label>
                    <select id="scrollAlignZone3" class="form-select">
                      <option value="PA_LEFT">Left</option>
                      <option value="PA_CENTER">Center</option>
                      <option value="PA_RIGHT">Right</option>
                    </select>
                  </div>

                </div>
                <!-- SPLIT POINT -->

              </div>
              <div class="row g-3" id="zone3ApplyRow">
                <div class="col-12">
                  <button id="zone3Settings" class="w-100 btn btn-primary btn-lg"
                    onClick="preparePostRequest(event, this.id, null);">Apply</button>
                </div>
              </div>


              <hr class="my-4">
              <div class="col-sm-12"></div>
              <footer class="my-5 pt-5 text-muted text-center text-small border-top">
                <p class="mb-1">&copy; 2026 wledPixel <span id="footerFwVer"></span></p>
                <p class="mb-1">Developed by <a href="https://github.com/widapro"
                    class="text-reset text-decoration-none">widapro</a></p>
                <ul class="list-inline">
                  <li class="list-inline-item"><a href="https://github.com/widapro/wledPixel" target="_blank"
                      class="text-decoration-none">GitHub</a></li>
                  <li class="list-inline-item">|</li>
                  <li class="list-inline-item"><a href="https://github.com/widapro/wledPixel/issues" target="_blank"
                      class="text-decoration-none">Report Bug</a></li>
                </ul>
              </footer>
          </form>
        </div>
      </div>
    </main>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>



  <div class="position-fixed top-0 end-0 p-3" style="z-index: 11">

    <div id="liveToastDanger" class="toast align-items-center text-white bg-danger border-0" role="alert"
      aria-live="assertive" aria-atomic="true" data-bs-autohide="true">
      <div class="d-flex">
        <div class="toast-body">
          Error!
        </div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
          aria-label="Close"></button>
      </div>
    </div>
    <div id="liveToastSuccess" class="toast align-items-center text-white bg-success border-0" role="alert"
      aria-live="assertive" aria-atomic="true">
      <div class="d-flex">
        <div class="toast-body">
          Success.
        </div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
          aria-label="Close"></button>
      </div>
    </div>
    <div id="liveToastBusy" class="toast align-items-center text-white bg-warning border-0" role="alert"
      aria-live="assertive" aria-atomic="true" data-bs-delay="3000">
      <div class="d-flex">
        <div class="toast-body">
          Device busy, retrying...
        </div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
          aria-label="Close"></button>
      </div>
    </div>
  </div>



  <script>
    function fetchWithRetry(url, options = {}, retries = 10, delayMs = 2000) {
      return fetch(url, options).then(res => {
        if (res.status === 503 && retries > 0) {
          console.log(`503 received, retrying in ${delayMs}ms...`);
          return new Promise(resolve => setTimeout(resolve, delayMs))
            .then(() => fetchWithRetry(url, options, retries - 1, delayMs));
        }
        if (!res.ok) {
          throw new Error(`HTTP error! status: ${res.status}`);
        }
        return res.json();
      });
    }

    window.onload = function (e) {
      // Fetch settings from API
      fetchWithRetry('/api/zone-settings')
        .then(data => {
          console.log('Settings loaded:', data);

          function setVal(id, val) {
            var el = document.getElementById(id);
            if (el) el.value = val;
          }
          function setChecked(id, val) {
            var el = document.getElementById(id);
            if (el) el.checked = val;
          }
          function setText(id, val) {
            var el = document.getElementById(id);
            if (el) el.innerText = val;
          }
          function setInner(id, val) {
            var el = document.getElementById(id);
            if (el) el.innerHTML = val;
          }


          // Populate fields
          setVal("workModeZone0", data.workModeZone0);
          setVal("workModeZone1", data.workModeZone1);
          setVal("workModeZone2", data.workModeZone2);
          setVal("workModeZone3", data.workModeZone3);
          setVal("zoneNumbers", data.zoneNumbers);
          setVal("zone0Begin", data.zone0Begin);
          setVal("zone0End", data.zone0End);
          setVal("zone1Begin", data.zone1Begin);
          setVal("zone1End", data.zone1End);
          setVal("zone2Begin", data.zone2Begin);
          setVal("zone2End", data.zone2End);
          setVal("zone3Begin", data.zone3Begin);
          setVal("zone3End", data.zone3End);
          setVal("intensity", data.intensity);
          setInner("intensityValue", data.intensity);
          setVal("scrollSpeedZone0", data.scrollSpeedZone0);
          setVal("scrollSpeedZone1", data.scrollSpeedZone1);
          setVal("scrollSpeedZone2", data.scrollSpeedZone2);
          setVal("scrollSpeedZone3", data.scrollSpeedZone3);
          setVal("scrollPauseZone0", data.scrollPauseZone0);
          setVal("scrollPauseZone1", data.scrollPauseZone1);
          setVal("scrollPauseZone2", data.scrollPauseZone2);
          setVal("scrollPauseZone3", data.scrollPauseZone3);
          setVal("scrollAlignZone0", data.scrollAlignZone0);
          setVal("scrollAlignZone1", data.scrollAlignZone1);
          setVal("scrollAlignZone2", data.scrollAlignZone2);
          setVal("scrollAlignZone3", data.scrollAlignZone3);
          setVal("scrollEffectZone0In", data.scrollEffectZone0In);
          setVal("scrollEffectZone0Out", data.scrollEffectZone0Out);
          setVal("scrollEffectZone1In", data.scrollEffectZone1In);
          setVal("scrollEffectZone1Out", data.scrollEffectZone1Out);
          setVal("scrollEffectZone2In", data.scrollEffectZone2In);
          setVal("scrollEffectZone2Out", data.scrollEffectZone2Out);
          setVal("scrollEffectZone3In", data.scrollEffectZone3In);
          setVal("scrollEffectZone3Out", data.scrollEffectZone3Out);

          setChecked("mqttEnable", data.mqttEnable);

          setVal("mqttServerAddress", data.mqttServerAddress);
          setVal("mqttServerPort", data.mqttServerPort);
          setVal("mqttUsername", data.mqttUsername);
          // Password is not sent back for security, or handle if needed
          setVal("mqttPassword", data.mqttPassword);

          setVal("mqttTextTopicZone0", data.mqttTextTopicZone0);
          setVal("mqttTextTopicZone1", data.mqttTextTopicZone1);
          setVal("mqttTextTopicZone2", data.mqttTextTopicZone2);
          setVal("mqttTextTopicZone3", data.mqttTextTopicZone3);
          setVal("ntpTimeZone", data.ntpTimeZone);
          setVal("ntpUpdateInterval", data.ntpUpdateInterval);
          setVal("ntpServer", data.ntpServer);
          setVal("clockDisplayFormatZone0", data.clockDisplayFormatZone0);
          setVal("clockDisplayFormatZone1", data.clockDisplayFormatZone1);
          setVal("clockDisplayFormatZone2", data.clockDisplayFormatZone2);
          setVal("clockDisplayFormatZone3", data.clockDisplayFormatZone3);
          setVal("owmWhatToDisplayZone0", data.owmWhatToDisplayZone0);
          setVal("owmWhatToDisplayZone1", data.owmWhatToDisplayZone1);
          setVal("owmWhatToDisplayZone2", data.owmWhatToDisplayZone2);
          setVal("owmWhatToDisplayZone3", data.owmWhatToDisplayZone3);
          setVal("owmApiToken", data.owmApiToken);
          setVal("owmUnitsFormat", data.owmUnitsFormat);
          setVal("owmUpdateInterval", data.owmUpdateInterval);
          setVal("owmCity", data.owmCity);
          setVal("fontZone0", data.fontZone0);
          setVal("fontZone1", data.fontZone1);
          setVal("fontZone2", data.fontZone2);
          setVal("fontZone3", data.fontZone3);
          setVal("haAddr", data.haAddr);
          setVal("haApiHttpType", data.haApiHttpType);
          setVal("haApiToken", data.haApiToken);
          setVal("haApiPort", data.haApiPort);
          setVal("haUpdateInterval", data.haUpdateInterval);
          setVal("haSensorIdZone0", data.haSensorIdZone0);
          setVal("haSensorIdZone1", data.haSensorIdZone1);
          setVal("haSensorIdZone2", data.haSensorIdZone2);
          setVal("haSensorIdZone3", data.haSensorIdZone3);
          setVal("haSensorPostfixZone0", data.haSensorPostfixZone0);
          setVal("haSensorPostfixZone1", data.haSensorPostfixZone1);
          setVal("haSensorPostfixZone2", data.haSensorPostfixZone2);
          setVal("haSensorPostfixZone3", data.haSensorPostfixZone3);
          setVal("mqttPostfixZone0", data.mqttPostfixZone0);
          setVal("mqttPostfixZone1", data.mqttPostfixZone1);
          setVal("mqttPostfixZone2", data.mqttPostfixZone2);
          setVal("mqttPostfixZone3", data.mqttPostfixZone3);
          setChecked("scrollInfiniteZone0", data.scrollInfiniteZone0);
          setChecked("scrollInfiniteZone1", data.scrollInfiniteZone1);
          setChecked("scrollInfiniteZone2", data.scrollInfiniteZone2);
          setChecked("scrollInfiniteZone3", data.scrollInfiniteZone3);
          setVal("ds18b20PostfixZone0", data.ds18b20PostfixZone0);
          setVal("ds18b20PostfixZone1", data.ds18b20PostfixZone1);
          setVal("ds18b20PostfixZone2", data.ds18b20PostfixZone2);
          setVal("ds18b20PostfixZone3", data.ds18b20PostfixZone3);
          // Countdown settings
          if (data.countdownFormatZone0) setVal("countdownFormatZone0", data.countdownFormatZone0);
          if (data.countdownFormatZone1) setVal("countdownFormatZone1", data.countdownFormatZone1);
          if (data.countdownFormatZone2) setVal("countdownFormatZone2", data.countdownFormatZone2);
          if (data.countdownFormatZone3) setVal("countdownFormatZone3", data.countdownFormatZone3);
          if (data.countdownFinishZone0) setVal("countdownFinishZone0", data.countdownFinishZone0);
          if (data.countdownFinishZone1) setVal("countdownFinishZone1", data.countdownFinishZone1);
          if (data.countdownFinishZone2) setVal("countdownFinishZone2", data.countdownFinishZone2);
          if (data.countdownFinishZone3) setVal("countdownFinishZone3", data.countdownFinishZone3);
          if (data.countdownTargetZone0) setVal("countdownTargetZone0", data.countdownTargetZone0);
          if (data.countdownTargetZone1) setVal("countdownTargetZone1", data.countdownTargetZone1);
          if (data.countdownTargetZone2) setVal("countdownTargetZone2", data.countdownTargetZone2);
          if (data.countdownTargetZone3) setVal("countdownTargetZone3", data.countdownTargetZone3);
          if (data.countdownPrefixZone0) setVal("countdownPrefixZone0", data.countdownPrefixZone0);
          if (data.countdownPrefixZone1) setVal("countdownPrefixZone1", data.countdownPrefixZone1);
          if (data.countdownPrefixZone2) setVal("countdownPrefixZone2", data.countdownPrefixZone2);
          if (data.countdownPrefixZone3) setVal("countdownPrefixZone3", data.countdownPrefixZone3);
          if (data.countdownSuffixZone0) setVal("countdownSuffixZone0", data.countdownSuffixZone0);
          if (data.countdownSuffixZone1) setVal("countdownSuffixZone1", data.countdownSuffixZone1);
          if (data.countdownSuffixZone2) setVal("countdownSuffixZone2", data.countdownSuffixZone2);
          if (data.countdownSuffixZone3) setVal("countdownSuffixZone3", data.countdownSuffixZone3);
          setChecked("countdownShowUnitsZone0", !!data.countdownShowUnitsZone0);
          setChecked("countdownShowUnitsZone1", !!data.countdownShowUnitsZone1);
          setChecked("countdownShowUnitsZone2", !!data.countdownShowUnitsZone2);
          setChecked("countdownShowUnitsZone3", !!data.countdownShowUnitsZone3);
          setVal("charspacingZone0", data.charspacingZone0);
          setVal("charspacingZone1", data.charspacingZone1);
          setVal("charspacingZone2", data.charspacingZone2);
          setVal("charspacingZone3", data.charspacingZone3);
          setVal("deviceName", data.deviceName);
          setVal("ds18b20UpdateInterval", data.ds18b20UpdateInterval);
          setVal("ds18b20UnitsFormat", data.ds18b20UnitsFormat);

          setChecked("disableServiceMessages", data.disableServiceMessages);
          setChecked("disableDotsBlink", data.disableDotsBlink);
          setChecked("ds18b20Enable", data.ds18b20Enable);
          setText("ds18b20TempVal", data.ds18b20Temp);
          // Stock Ticker settings
          if (data.stockApiToken) setVal("stockApiToken", data.stockApiToken);
          if (data.stockUpdateInterval) setVal("stockUpdateInterval", data.stockUpdateInterval);
          setChecked("stockShowArrowsZone0", !!(data.stockShowArrowsZone0 !== undefined ? data.stockShowArrowsZone0 : data.stockShowArrows));
          setChecked("stockShowArrowsZone1", !!(data.stockShowArrowsZone1 !== undefined ? data.stockShowArrowsZone1 : data.stockShowArrows));
          setChecked("stockShowArrowsZone2", !!(data.stockShowArrowsZone2 !== undefined ? data.stockShowArrowsZone2 : data.stockShowArrows));
          setChecked("stockShowArrowsZone3", !!(data.stockShowArrowsZone3 !== undefined ? data.stockShowArrowsZone3 : data.stockShowArrows));
          if (data.stockSymbolsZone0) setVal("stockSymbolsZone0", data.stockSymbolsZone0);
          if (data.stockDisplayFormatZone0) setVal("stockDisplayFormatZone0", data.stockDisplayFormatZone0);
          if (data.stockPrefixZone0 !== undefined) setVal("stockPrefixZone0", data.stockPrefixZone0);
          if (data.stockPostfixZone0 !== undefined) setVal("stockPostfixZone0", data.stockPostfixZone0);
          if (data.stockSymbolsZone1) setVal("stockSymbolsZone1", data.stockSymbolsZone1);
          if (data.stockDisplayFormatZone1) setVal("stockDisplayFormatZone1", data.stockDisplayFormatZone1);
          if (data.stockPrefixZone1 !== undefined) setVal("stockPrefixZone1", data.stockPrefixZone1);
          if (data.stockPostfixZone1 !== undefined) setVal("stockPostfixZone1", data.stockPostfixZone1);
          if (data.stockSymbolsZone2) setVal("stockSymbolsZone2", data.stockSymbolsZone2);
          if (data.stockDisplayFormatZone2) setVal("stockDisplayFormatZone2", data.stockDisplayFormatZone2);
          if (data.stockPrefixZone2 !== undefined) setVal("stockPrefixZone2", data.stockPrefixZone2);
          if (data.stockPostfixZone2 !== undefined) setVal("stockPostfixZone2", data.stockPostfixZone2);
          if (data.stockSymbolsZone3) setVal("stockSymbolsZone3", data.stockSymbolsZone3);
          if (data.stockDisplayFormatZone3) setVal("stockDisplayFormatZone3", data.stockDisplayFormatZone3);
          if (data.stockPrefixZone3 !== undefined) setVal("stockPrefixZone3", data.stockPrefixZone3);
          if (data.stockPostfixZone3 !== undefined) setVal("stockPostfixZone3", data.stockPostfixZone3);

          // Populate Info section
          setText("firmwareVer", data.firmwareVer);
          setText("platform", data.platform);
          if (document.getElementById("footerFwVer")) setText("footerFwVer", data.firmwareVer);
          setText("wifiSsid", data.wifiSsid);
          setText("wifiIp", data.wifiIp);
          setText("wifiGateway", data.wifiGateway);
          setText("wifiRssi", data.wifiRssi + " dBm");
          setText("mqttDevicePrefixInfo", data.mqttDevicePrefix);
          setText("mqttDevicePrefixHelp", data.mqttDevicePrefix);
          setText("ds18b20TempInfo", data.ds18b20Temp);

          // Trigger UI updates based on loaded values (Hiding/Showing fields)
          // Need to manually trigger the logic that was previously in the if-blocks
          updateUI(data);

        })
        .catch(err => {
          console.error('Error loading settings:', err);
          // Optionally show error toast
        });
    }

    function updateUI(data) {
      const zoneNumbers = document.getElementById("zoneNumbers").value;
      if (zoneNumbers == "1") {
        $(document.getElementById("zone1BeginDiv")).hide();
        $(document.getElementById("zone1EndDiv")).hide();
        $(document.getElementById("zone2BeginDiv")).hide();
        $(document.getElementById("zone2EndDiv")).hide();
        $(document.getElementById("zone3BeginDiv")).hide();
        $(document.getElementById("zone3EndDiv")).hide();

        $('#zone1Wrapper').addClass('d-none');
        $('#zone2Wrapper').addClass('d-none');
        $('#zone3WrapperPart1').addClass('d-none');
        $('#zone3ApplyRow').addClass('d-none');
      }
      if (zoneNumbers == "2") {
        $(document.getElementById("zone1BeginDiv")).show();
        $(document.getElementById("zone1EndDiv")).show();
        $(document.getElementById("zone2BeginDiv")).hide();
        $(document.getElementById("zone2EndDiv")).hide();
        $(document.getElementById("zone3BeginDiv")).hide();
        $(document.getElementById("zone3EndDiv")).hide();

        $('#zone1Wrapper').removeClass('d-none');
        $('#zone2Wrapper').addClass('d-none');
        $('#zone3WrapperPart1').addClass('d-none');
        $('#zone3ApplyRow').addClass('d-none');
      }
      if (zoneNumbers == "3") {
        $(document.getElementById("zone1BeginDiv")).show();
        $(document.getElementById("zone1EndDiv")).show();
        $(document.getElementById("zone2BeginDiv")).show();
        $(document.getElementById("zone2EndDiv")).show();
        $(document.getElementById("zone3BeginDiv")).hide();
        $(document.getElementById("zone3EndDiv")).hide();

        $('#zone1Wrapper').removeClass('d-none');
        $('#zone2Wrapper').removeClass('d-none');
        $('#zone3WrapperPart1').addClass('d-none');
        $('#zone3ApplyRow').addClass('d-none');
      }
      if (zoneNumbers == "4") {
        $(document.getElementById("zone1BeginDiv")).show();
        $(document.getElementById("zone1EndDiv")).show();
        $(document.getElementById("zone2BeginDiv")).show();
        $(document.getElementById("zone2EndDiv")).show();
        $(document.getElementById("zone3BeginDiv")).show();
        $(document.getElementById("zone3EndDiv")).show();

        $('#zone1Wrapper').removeClass('d-none');
        $('#zone2Wrapper').removeClass('d-none');
        $('#zone3WrapperPart1').removeClass('d-none');
        $('#zone3ApplyRow').removeClass('d-none');
      }

      function updateZoneFields(zoneIndex) {
        const workMode = document.getElementById("workModeZone" + zoneIndex).value;
        const zoneDivSuffix = "Zone" + zoneIndex + "Div"; // e.g. Zone0Div

        if (workMode == "mqttClient") {
          $(document.getElementById("emptyZone" + zoneIndex + "Div")).hide();
          $(document.getElementById("mqttZone" + zoneIndex + "PrefixDiv")).show();
          $(document.getElementById("mqttPostfix" + zoneDivSuffix)).show();
          $(document.getElementById("mqttDevicePrefix" + zoneDivSuffix)).show();
          $(document.getElementById("scrollInfinite" + zoneDivSuffix)).show();
        }
        if (workMode == "owmWeather") {
          $(document.getElementById("emptyZone" + zoneIndex + "Div")).hide();
          $(document.getElementById("owmWhatToDisplayZone" + zoneIndex + "div")).show();
        }
        if (workMode == "wallClock") {
          $(document.getElementById("emptyZone" + zoneIndex + "Div")).hide();
          $(document.getElementById("clockDisplayFormat" + zoneDivSuffix)).show();
          $(document.getElementById("scrollInfinite" + zoneDivSuffix)).show();
          document.getElementById("scrollEffectZone" + zoneIndex + "Out").disabled = true;
        }
        if (workMode == "haClient") {
          $(document.getElementById("emptyZone" + zoneIndex + "Div")).hide();
          $(document.getElementById("haSensorId" + zoneDivSuffix)).show();
          $(document.getElementById("haSensorPostfix" + zoneDivSuffix)).show();
        }
        if (workMode == "intTempSensor") {
          $(document.getElementById("emptyZone" + zoneIndex + "Div")).hide();
          $(document.getElementById("ds18b20Postfix" + zoneDivSuffix)).show();
        }
        if (workMode == "manualInput") {
          $(document.getElementById("emptyZone" + zoneIndex + "Div")).hide();
          $(document.getElementById("scrollInfinite" + zoneDivSuffix)).show();
        }
        if (workMode == "countdown") {
          $(document.getElementById("emptyZone" + zoneIndex + "Div")).hide();
          $(document.getElementById("countdownTargetZone" + zoneIndex + "Div")).show();
          $(document.getElementById("countdownSettingsZone" + zoneIndex + "Div")).show();
          $(document.getElementById("scrollInfinite" + zoneDivSuffix)).show();
          $(document.getElementById("scrollSpeedZone" + zoneIndex + "Div")).show();
          $(document.getElementById("scrollAlignZone" + zoneIndex + "Div")).show();
          document.getElementById("scrollEffectZone" + zoneIndex + "Out").disabled = true;
        }
        if (workMode == "stockTicker") {
          $(document.getElementById("emptyZone" + zoneIndex + "Div")).hide();
          $(document.getElementById("stockDisplayFormatZone" + zoneIndex + "Div")).show();
          $(document.getElementById("stockSymbols" + zoneDivSuffix)).show();
          $(document.getElementById("scrollInfinite" + zoneDivSuffix)).show();
          $(document.getElementById("stockShowArrowsZone" + zoneIndex + "Div")).show();
        }
      }

      updateZoneFields(0);
      updateZoneFields(1);
      updateZoneFields(2);
      updateZoneFields(3);
    }


  </script>




  <script>
    workModeZone0.addEventListener('change', function (e) {
      $(document.getElementById("emptyZone0Div")).show();
      $(document.getElementById("mqttZone0PrefixDiv")).hide();
      $(document.getElementById("mqttPostfixZone0Div")).hide();
      $(document.getElementById("scrollInfiniteZone0Div")).hide();
      $(document.getElementById("mqttDevicePrefixZone0Div")).hide();
      $(document.getElementById("scrollPauseZone0Div")).show();
      $(document.getElementById("scrollEffectZone0InDiv")).show();
      $(document.getElementById("scrollEffectZone0OutDiv")).show();
      $(document.getElementById("scrollSpeedZone0Div")).show();
      $(document.getElementById("scrollAlignZone0Div")).show();
      $(document.getElementById("owmWhatToDisplayZone0div")).hide();
      $(document.getElementById("clockDisplayFormatZone0Div")).hide();
      $(document.getElementById("haSensorIdZone0Div")).hide();
      $(document.getElementById("haSensorPostfixZone0Div")).hide();
      $(document.getElementById("ds18b20PostfixZone0Div")).hide();
      $(document.getElementById("countdownTargetZone0Div")).hide();
      $(document.getElementById("countdownSettingsZone0Div")).hide();
      $(document.getElementById("stockSymbolsZone0Div")).hide();
      $(document.getElementById("stockShowArrowsZone0Div")).hide();
      $(document.getElementById("stockDisplayFormatZone0Div")).hide();

      if (e.target.value == "mqttClient") {
        $(document.getElementById("emptyZone0Div")).hide();
        $(document.getElementById("mqttZone0PrefixDiv")).show();
        $(document.getElementById("mqttPostfixZone0Div")).show();
        $(document.getElementById("scrollInfiniteZone0Div")).show();
        $(document.getElementById("mqttDevicePrefixZone0Div")).show();
      }

      if (e.target.value == "wallClock") {
        $(document.getElementById("emptyZone0Div")).hide();
        $(document.getElementById("clockDisplayFormatZone0Div")).show();
        $(document.getElementById("scrollInfiniteZone0Div")).show();
        document.getElementById("scrollEffectZone0Out").disabled = true;
      }

      if (e.target.value == "owmWeather") {
        $(document.getElementById("emptyZone0Div")).hide();
        $(document.getElementById("owmWhatToDisplayZone0div")).show();
      }

      if (e.target.value == "haClient") {
        $(document.getElementById("emptyZone0Div")).hide();
        $(document.getElementById("haSensorIdZone0Div")).show();
        $(document.getElementById("haSensorPostfixZone0Div")).show();
      }
      if (e.target.value == "intTempSensor") {
        $(document.getElementById("emptyZone0Div")).hide();
        $(document.getElementById("ds18b20PostfixZone0Div")).show();
      }
      if (e.target.value == "manualInput") {
        $(document.getElementById("emptyZone0Div")).hide();
        $(document.getElementById("scrollInfiniteZone0Div")).show();
      }
      if (e.target.value == "countdown") {
        $(document.getElementById("emptyZone0Div")).hide();
        $(document.getElementById("countdownTargetZone0Div")).show();
        $(document.getElementById("countdownSettingsZone0Div")).show();
        $(document.getElementById("scrollInfiniteZone0Div")).show();
        $(document.getElementById("scrollSpeedZone0Div")).show();
        $(document.getElementById("scrollAlignZone0Div")).show();
        document.getElementById("scrollEffectZone0Out").disabled = true;
      }
      if (e.target.value == "stockTicker") {
        $(document.getElementById("emptyZone0Div")).hide();
        $(document.getElementById("stockDisplayFormatZone0Div")).show();
        $(document.getElementById("stockSymbolsZone0Div")).show();
        $(document.getElementById("scrollInfiniteZone0Div")).show();
        $(document.getElementById("stockShowArrowsZone0Div")).show();
      }
    });

    workModeZone1.addEventListener('change', function (e) {
      $(document.getElementById("emptyZone1Div")).show();
      $(document.getElementById("mqttZone1PrefixDiv")).hide();
      $(document.getElementById("mqttPostfixZone1Div")).hide();
      $(document.getElementById("scrollInfiniteZone1Div")).hide();
      $(document.getElementById("mqttDevicePrefixZone1Div")).hide();
      $(document.getElementById("scrollPauseZone1Div")).show();
      $(document.getElementById("scrollEffectZone1InDiv")).show();
      $(document.getElementById("scrollEffectZone1OutDiv")).show();
      $(document.getElementById("scrollSpeedZone1Div")).show();
      $(document.getElementById("scrollAlignZone1Div")).show();
      $(document.getElementById("owmWhatToDisplayZone1div")).hide();
      $(document.getElementById("clockDisplayFormatZone1Div")).hide();
      $(document.getElementById("haSensorIdZone1Div")).hide();
      $(document.getElementById("haSensorPostfixZone1Div")).hide();
      $(document.getElementById("ds18b20PostfixZone1Div")).hide();
      $(document.getElementById("countdownTargetZone1Div")).hide();
      $(document.getElementById("countdownSettingsZone1Div")).hide();
      $(document.getElementById("stockSymbolsZone1Div")).hide();
      $(document.getElementById("stockShowArrowsZone1Div")).hide();
      $(document.getElementById("stockDisplayFormatZone1Div")).hide();

      if (e.target.value == "mqttClient") {
        $(document.getElementById("emptyZone1Div")).hide();
        $(document.getElementById("mqttZone1PrefixDiv")).show();
        $(document.getElementById("mqttPostfixZone1Div")).show();
        $(document.getElementById("scrollInfiniteZone1Div")).show();
        $(document.getElementById("mqttDevicePrefixZone1Div")).show();
      }

      if (e.target.value == "wallClock") {
        $(document.getElementById("emptyZone1Div")).hide();
        $(document.getElementById("clockDisplayFormatZone1Div")).show();
        $(document.getElementById("scrollInfiniteZone1Div")).show();
        document.getElementById("scrollEffectZone1Out").disabled = true;
      }

      if (e.target.value == "owmWeather") {
        $(document.getElementById("emptyZone1Div")).hide();
        $(document.getElementById("owmWhatToDisplayZone1div")).show();
      }

      if (e.target.value == "haClient") {
        $(document.getElementById("emptyZone1Div")).hide();
        $(document.getElementById("haSensorIdZone1Div")).show();
        $(document.getElementById("haSensorPostfixZone1Div")).show();
      }
      if (e.target.value == "intTempSensor") {
        $(document.getElementById("emptyZone1Div")).hide();
        $(document.getElementById("ds18b20PostfixZone1Div")).show();
      }
      if (e.target.value == "manualInput") {
        $(document.getElementById("emptyZone1Div")).hide();
        $(document.getElementById("scrollInfiniteZone1Div")).show();
      }
      if (e.target.value == "countdown") {
        $(document.getElementById("emptyZone1Div")).hide();
        $(document.getElementById("countdownTargetZone1Div")).show();
        $(document.getElementById("countdownSettingsZone1Div")).show();
        $(document.getElementById("scrollInfiniteZone1Div")).show();
        $(document.getElementById("scrollSpeedZone1Div")).show();
        $(document.getElementById("scrollAlignZone1Div")).show();
        document.getElementById("scrollEffectZone1Out").disabled = true;
      }
      if (e.target.value == "stockTicker") {
        $(document.getElementById("emptyZone1Div")).hide();
        $(document.getElementById("stockDisplayFormatZone1Div")).show();
        $(document.getElementById("stockSymbolsZone1Div")).show();
        $(document.getElementById("scrollInfiniteZone1Div")).show();
        $(document.getElementById("stockShowArrowsZone1Div")).show();
      }
    });

    workModeZone2.addEventListener('change', function (e) {
      $(document.getElementById("emptyZone2Div")).show();
      $(document.getElementById("mqttZone2PrefixDiv")).hide();
      $(document.getElementById("mqttPostfixZone2Div")).hide();
      $(document.getElementById("scrollInfiniteZone2Div")).hide();
      $(document.getElementById("mqttDevicePrefixZone2Div")).hide();
      $(document.getElementById("scrollPauseZone2Div")).show();
      $(document.getElementById("scrollEffectZone2InDiv")).show();
      $(document.getElementById("scrollEffectZone2OutDiv")).show();
      $(document.getElementById("scrollSpeedZone2Div")).show();
      $(document.getElementById("scrollAlignZone2Div")).show();
      $(document.getElementById("owmWhatToDisplayZone2div")).hide();
      $(document.getElementById("clockDisplayFormatZone2Div")).hide();
      $(document.getElementById("haSensorIdZone2Div")).hide();
      $(document.getElementById("haSensorPostfixZone2Div")).hide();
      $(document.getElementById("ds18b20PostfixZone2Div")).hide();
      $(document.getElementById("countdownTargetZone2Div")).hide();
      $(document.getElementById("countdownSettingsZone2Div")).hide();
      $(document.getElementById("stockSymbolsZone2Div")).hide();
      $(document.getElementById("stockShowArrowsZone2Div")).hide();
      $(document.getElementById("stockDisplayFormatZone2Div")).hide();

      if (e.target.value == "mqttClient") {
        $(document.getElementById("emptyZone2Div")).hide();
        $(document.getElementById("mqttZone2PrefixDiv")).show();
        $(document.getElementById("mqttPostfixZone2Div")).show();
        $(document.getElementById("scrollInfiniteZone2Div")).show();
        $(document.getElementById("mqttDevicePrefixZone2Div")).show();
      }

      if (e.target.value == "wallClock") {
        $(document.getElementById("emptyZone2Div")).hide();
        $(document.getElementById("clockDisplayFormatZone2Div")).show();
        $(document.getElementById("scrollInfiniteZone2Div")).show();
        document.getElementById("scrollEffectZone2Out").disabled = true;
      }

      if (e.target.value == "owmWeather") {
        $(document.getElementById("emptyZone2Div")).hide();
        $(document.getElementById("owmWhatToDisplayZone2div")).show();
      }

      if (e.target.value == "haClient") {
        $(document.getElementById("emptyZone2Div")).hide();
        $(document.getElementById("haSensorIdZone2Div")).show();
        $(document.getElementById("haSensorPostfixZone2Div")).show();
      }
      if (e.target.value == "intTempSensor") {
        $(document.getElementById("emptyZone2Div")).hide();
        $(document.getElementById("ds18b20PostfixZone2Div")).show();
      }
      if (e.target.value == "manualInput") {
        $(document.getElementById("emptyZone2Div")).hide();
        $(document.getElementById("scrollInfiniteZone2Div")).show();
      }
      if (e.target.value == "countdown") {
        $(document.getElementById("emptyZone2Div")).hide();
        $(document.getElementById("countdownTargetZone2Div")).show();
        $(document.getElementById("countdownSettingsZone2Div")).show();
        $(document.getElementById("scrollInfiniteZone2Div")).show();
        $(document.getElementById("scrollSpeedZone2Div")).show();
        $(document.getElementById("scrollAlignZone2Div")).show();
        document.getElementById("scrollEffectZone2Out").disabled = true;
      }
      if (e.target.value == "stockTicker") {
        $(document.getElementById("emptyZone2Div")).hide();
        $(document.getElementById("stockDisplayFormatZone2Div")).show();
        $(document.getElementById("stockSymbolsZone2Div")).show();
        $(document.getElementById("scrollInfiniteZone2Div")).show();
        $(document.getElementById("stockShowArrowsZone2Div")).show();
      }
    });

    workModeZone3.addEventListener('change', function (e) {
      $(document.getElementById("emptyZone3Div")).show();
      $(document.getElementById("mqttZone3PrefixDiv")).hide();
      $(document.getElementById("mqttPostfixZone3Div")).hide();
      $(document.getElementById("scrollInfiniteZone3Div")).hide();
      $(document.getElementById("mqttDevicePrefixZone3Div")).hide();
      $(document.getElementById("scrollPauseZone3Div")).show();
      $(document.getElementById("scrollEffectZone3InDiv")).show();
      $(document.getElementById("scrollEffectZone3OutDiv")).show();
      $(document.getElementById("scrollSpeedZone3Div")).show();
      $(document.getElementById("scrollAlignZone3Div")).show();
      $(document.getElementById("owmWhatToDisplayZone3div")).hide();
      $(document.getElementById("clockDisplayFormatZone3Div")).hide();
      $(document.getElementById("haSensorIdZone3Div")).hide();
      $(document.getElementById("haSensorPostfixZone3Div")).hide();
      $(document.getElementById("ds18b20PostfixZone3Div")).hide();
      $(document.getElementById("countdownTargetZone3Div")).hide();
      $(document.getElementById("countdownSettingsZone3Div")).hide();
      $(document.getElementById("stockSymbolsZone3Div")).hide();
      $(document.getElementById("stockShowArrowsZone3Div")).hide();
      $(document.getElementById("stockDisplayFormatZone3Div")).hide();

      if (e.target.value == "mqttClient") {
        $(document.getElementById("emptyZone3Div")).hide();
        $(document.getElementById("mqttZone3PrefixDiv")).show();
        $(document.getElementById("mqttPostfixZone3Div")).show();
        $(document.getElementById("scrollInfiniteZone3Div")).show();
        $(document.getElementById("mqttDevicePrefixZone3Div")).show();
      }

      if (e.target.value == "wallClock") {
        $(document.getElementById("emptyZone3Div")).hide();
        $(document.getElementById("clockDisplayFormatZone3Div")).show();
        $(document.getElementById("scrollInfiniteZone3Div")).show();
        document.getElementById("scrollEffectZone3Out").disabled = true;
      }

      if (e.target.value == "owmWeather") {
        $(document.getElementById("emptyZone3Div")).hide();
        $(document.getElementById("owmWhatToDisplayZone3div")).show();
      }

      if (e.target.value == "haClient") {
        $(document.getElementById("emptyZone3Div")).hide();
        $(document.getElementById("haSensorIdZone3Div")).show();
        $(document.getElementById("haSensorPostfixZone3Div")).show();
      }
      if (e.target.value == "intTempSensor") {
        $(document.getElementById("emptyZone3Div")).hide();
        $(document.getElementById("ds18b20PostfixZone3Div")).show();
      }
      if (e.target.value == "manualInput") {
        $(document.getElementById("emptyZone3Div")).hide();
        $(document.getElementById("scrollInfiniteZone3Div")).show();
      }
      if (e.target.value == "countdown") {
        $(document.getElementById("emptyZone3Div")).hide();
        $(document.getElementById("countdownTargetZone3Div")).show();
        $(document.getElementById("countdownSettingsZone3Div")).show();
        $(document.getElementById("scrollInfiniteZone3Div")).show();
        $(document.getElementById("scrollSpeedZone3Div")).show();
        $(document.getElementById("scrollAlignZone3Div")).show();
        document.getElementById("scrollEffectZone3Out").disabled = true;
      }
      if (e.target.value == "stockTicker") {
        $(document.getElementById("emptyZone3Div")).hide();
        $(document.getElementById("stockDisplayFormatZone3Div")).show();
        $(document.getElementById("stockSymbolsZone3Div")).show();
        $(document.getElementById("scrollInfiniteZone3Div")).show();
        $(document.getElementById("stockShowArrowsZone3Div")).show();
      }
    });

    document.getElementById("zoneNumbers").addEventListener('change', function (e) {
      if (e.target.value == "1") {
        $(document.getElementById("zone1BeginDiv")).hide();
        $(document.getElementById("zone1EndDiv")).hide();
        $(document.getElementById("zone2BeginDiv")).hide();
        $(document.getElementById("zone2EndDiv")).hide();
        $(document.getElementById("zone3BeginDiv")).hide();
        $(document.getElementById("zone3EndDiv")).hide();

        $('#zone1Wrapper').addClass('d-none');
        $('#zone2Wrapper').addClass('d-none');
        $('#zone3WrapperPart1').addClass('d-none');
        $('#zone3ApplyRow').addClass('d-none');
      }
      if (e.target.value == "2") {
        $(document.getElementById("zone1BeginDiv")).show();
        $(document.getElementById("zone1EndDiv")).show();
        $(document.getElementById("zone2BeginDiv")).hide();
        $(document.getElementById("zone2EndDiv")).hide();
        $(document.getElementById("zone3BeginDiv")).hide();
        $(document.getElementById("zone3EndDiv")).hide();

        $('#zone1Wrapper').removeClass('d-none');
        $('#zone2Wrapper').addClass('d-none');
        $('#zone3WrapperPart1').addClass('d-none');
        $('#zone3ApplyRow').addClass('d-none');
      }
      if (e.target.value == "3") {
        $(document.getElementById("zone1BeginDiv")).show();
        $(document.getElementById("zone1EndDiv")).show();
        $(document.getElementById("zone2BeginDiv")).show();
        $(document.getElementById("zone2EndDiv")).show();
        $(document.getElementById("zone3BeginDiv")).hide();
        $(document.getElementById("zone3EndDiv")).hide();

        $('#zone1Wrapper').removeClass('d-none');
        $('#zone2Wrapper').removeClass('d-none');
        $('#zone3WrapperPart1').addClass('d-none');
        $('#zone3ApplyRow').addClass('d-none');
      }
      if (e.target.value == "4") {
        $(document.getElementById("zone1BeginDiv")).show();
        $(document.getElementById("zone1EndDiv")).show();
        $(document.getElementById("zone2BeginDiv")).show();
        $(document.getElementById("zone2EndDiv")).show();
        $(document.getElementById("zone3BeginDiv")).show();
        $(document.getElementById("zone3EndDiv")).show();

        $('#zone1Wrapper').removeClass('d-none');
        $('#zone2Wrapper').removeClass('d-none');
        $('#zone3WrapperPart1').removeClass('d-none');
        $('#zone3ApplyRow').removeClass('d-none');
      }
    });

    // Toggle scroll speed based on infinite scroll setting in countdown mode
    function checkScrollSpeed(zone) {
      if (document.getElementById("workModeZone" + zone).value == "countdown") {
        document.getElementById("scrollSpeedZone" + zone).disabled = !document.getElementById("scrollInfiniteZone" + zone).checked;
      }
    }
    document.getElementById("scrollInfiniteZone0").addEventListener('change', function () { checkScrollSpeed(0); });
    document.getElementById("scrollInfiniteZone1").addEventListener('change', function () { checkScrollSpeed(1); });
    document.getElementById("scrollInfiniteZone2").addEventListener('change', function () { checkScrollSpeed(2); });
    document.getElementById("scrollInfiniteZone3").addEventListener('change', function () { checkScrollSpeed(3); });

    function preparePostRequest(event, key, val) {
      event.preventDefault(); //This will prevent the default click action
      if (key == "intensity") {
        document.getElementById('intensityValue').innerHTML = val;
        data = {
          key: "intensity",
          intensity: val
        }
        sendPost(data);
      }

      if (key == "displaySettings") {
        data = {
          key: "displaySettings",
          zoneNumbers: document.getElementById("zoneNumbers").value,
          zone0Begin: document.getElementById("zone0Begin").value,
          zone0End: document.getElementById("zone0End").value,
          zone1Begin: document.getElementById("zone1Begin").value,
          zone1End: document.getElementById("zone1End").value,
          zone2Begin: document.getElementById("zone2Begin").value,
          zone2End: document.getElementById("zone2End").value,
          zone3Begin: document.getElementById("zone3Begin").value,
          zone3End: document.getElementById("zone3End").value
        }
        sendPost(data);
      }

      if (key == "zone0Settings") {
        data = {
          key: "zoneSettings",
          zone: 0,
          workMode: document.getElementById("workModeZone0").value,
          font: document.getElementById("fontZone0").value,
          owmWhatToDisplay: document.getElementById("owmWhatToDisplayZone0").value,
          haSensorId: document.getElementById("haSensorIdZone0").value,
          haSensorPostfix: document.getElementById("haSensorPostfixZone0").value,
          clockDisplayFormat: document.getElementById("clockDisplayFormatZone0").value,
          scrollSpeed: document.getElementById("scrollSpeedZone0").value,
          scrollPause: document.getElementById("scrollPauseZone0").value,
          scrollAlign: document.getElementById("scrollAlignZone0").value,
          scrollEffectIn: document.getElementById("scrollEffectZone0In").value,
          scrollEffectOut: document.getElementById("scrollEffectZone0Out").value,
          charspacing: document.getElementById("charspacingZone0").value,
          mqttTextTopic: document.getElementById("mqttTextTopicZone0").value,
          mqttPostfix: document.getElementById("mqttPostfixZone0").value,
          scrollInfinite: document.getElementById("scrollInfiniteZone0").checked,
          ds18b20Postfix: document.getElementById("ds18b20PostfixZone0").value,
          stockSymbols: document.getElementById("stockSymbolsZone0").value,
          stockDisplayFormat: document.getElementById("stockDisplayFormatZone0").value,
          stockPrefix: document.getElementById("stockPrefixZone0").value,
          stockPostfix: document.getElementById("stockPostfixZone0").value,
          stockShowArrows: document.getElementById("stockShowArrowsZone0").checked,
          countdownTarget: document.getElementById("countdownTargetZone0").value,
          countdownFormat: document.getElementById("countdownFormatZone0").value,
          countdownFinish: document.getElementById("countdownFinishZone0").value,
          countdownShowUnits: document.getElementById("countdownShowUnitsZone0").checked,
          countdownPrefix: document.getElementById("countdownPrefixZone0").value,
          countdownSuffix: document.getElementById("countdownSuffixZone0").value

        }
        sendPost(data);
      }

      if (key == "zone1Settings") {
        data = {
          key: "zoneSettings",
          zone: 1,
          workMode: document.getElementById("workModeZone1").value,
          font: document.getElementById("fontZone1").value,
          owmWhatToDisplay: document.getElementById("owmWhatToDisplayZone1").value,
          haSensorId: document.getElementById("haSensorIdZone1").value,
          haSensorPostfix: document.getElementById("haSensorPostfixZone1").value,
          clockDisplayFormat: document.getElementById("clockDisplayFormatZone1").value,
          scrollSpeed: document.getElementById("scrollSpeedZone1").value,
          scrollPause: document.getElementById("scrollPauseZone1").value,
          scrollAlign: document.getElementById("scrollAlignZone1").value,
          scrollEffectIn: document.getElementById("scrollEffectZone1In").value,
          scrollEffectOut: document.getElementById("scrollEffectZone1Out").value,
          charspacing: document.getElementById("charspacingZone1").value,
          mqttTextTopic: document.getElementById("mqttTextTopicZone1").value,
          mqttPostfix: document.getElementById("mqttPostfixZone1").value,
          scrollInfinite: document.getElementById("scrollInfiniteZone1").checked,
          ds18b20Postfix: document.getElementById("ds18b20PostfixZone1").value,
          stockSymbols: document.getElementById("stockSymbolsZone1").value,
          stockDisplayFormat: document.getElementById("stockDisplayFormatZone1").value,
          stockPrefix: document.getElementById("stockPrefixZone1").value,
          stockPostfix: document.getElementById("stockPostfixZone1").value,
          stockShowArrows: document.getElementById("stockShowArrowsZone1").checked,
          countdownTarget: document.getElementById("countdownTargetZone1").value,
          countdownFormat: document.getElementById("countdownFormatZone1").value,
          countdownFinish: document.getElementById("countdownFinishZone1").value,
          countdownShowUnits: document.getElementById("countdownShowUnitsZone1").checked,
          countdownPrefix: document.getElementById("countdownPrefixZone1").value,
          countdownSuffix: document.getElementById("countdownSuffixZone1").value
        }
        sendPost(data);
      }

      if (key == "zone2Settings") {
        data = {
          key: "zoneSettings",
          zone: 2,
          workMode: document.getElementById("workModeZone2").value,
          font: document.getElementById("fontZone2").value,
          owmWhatToDisplay: document.getElementById("owmWhatToDisplayZone2").value,
          haSensorId: document.getElementById("haSensorIdZone2").value,
          haSensorPostfix: document.getElementById("haSensorPostfixZone2").value,
          clockDisplayFormat: document.getElementById("clockDisplayFormatZone2").value,
          scrollSpeed: document.getElementById("scrollSpeedZone2").value,
          scrollPause: document.getElementById("scrollPauseZone2").value,
          scrollAlign: document.getElementById("scrollAlignZone2").value,
          scrollEffectIn: document.getElementById("scrollEffectZone2In").value,
          scrollEffectOut: document.getElementById("scrollEffectZone2Out").value,
          charspacing: document.getElementById("charspacingZone2").value,
          mqttTextTopic: document.getElementById("mqttTextTopicZone2").value,
          mqttPostfix: document.getElementById("mqttPostfixZone2").value,
          scrollInfinite: document.getElementById("scrollInfiniteZone2").checked,
          ds18b20Postfix: document.getElementById("ds18b20PostfixZone2").value,
          stockSymbols: document.getElementById("stockSymbolsZone2").value,
          stockDisplayFormat: document.getElementById("stockDisplayFormatZone2").value,
          stockPrefix: document.getElementById("stockPrefixZone2").value,
          stockPostfix: document.getElementById("stockPostfixZone2").value,
          stockShowArrows: document.getElementById("stockShowArrowsZone2").checked,
          countdownTarget: document.getElementById("countdownTargetZone2").value,
          countdownFormat: document.getElementById("countdownFormatZone2").value,
          countdownFinish: document.getElementById("countdownFinishZone2").value,
          countdownShowUnits: document.getElementById("countdownShowUnitsZone2").checked,
          countdownPrefix: document.getElementById("countdownPrefixZone2").value,
          countdownSuffix: document.getElementById("countdownSuffixZone2").value
        }
        sendPost(data);
      }

      if (key == "zone3Settings") {
        data = {
          key: "zoneSettings",
          zone: 3,
          workMode: document.getElementById("workModeZone3").value,
          font: document.getElementById("fontZone3").value,
          owmWhatToDisplay: document.getElementById("owmWhatToDisplayZone3").value,
          haSensorId: document.getElementById("haSensorIdZone3").value,
          haSensorPostfix: document.getElementById("haSensorPostfixZone3").value,
          clockDisplayFormat: document.getElementById("clockDisplayFormatZone3").value,
          scrollSpeed: document.getElementById("scrollSpeedZone3").value,
          scrollPause: document.getElementById("scrollPauseZone3").value,
          scrollAlign: document.getElementById("scrollAlignZone3").value,
          scrollEffectIn: document.getElementById("scrollEffectZone3In").value,
          scrollEffectOut: document.getElementById("scrollEffectZone3Out").value,
          charspacing: document.getElementById("charspacingZone3").value,
          mqttTextTopic: document.getElementById("mqttTextTopicZone3").value,
          mqttPostfix: document.getElementById("mqttPostfixZone3").value,
          scrollInfinite: document.getElementById("scrollInfiniteZone3").checked,
          ds18b20Postfix: document.getElementById("ds18b20PostfixZone3").value,
          stockSymbols: document.getElementById("stockSymbolsZone3").value,
          stockDisplayFormat: document.getElementById("stockDisplayFormatZone3").value,
          stockPrefix: document.getElementById("stockPrefixZone3").value,
          stockPostfix: document.getElementById("stockPostfixZone3").value,
          stockShowArrows: document.getElementById("stockShowArrowsZone3").checked,
          countdownTarget: document.getElementById("countdownTargetZone3").value,
          countdownFormat: document.getElementById("countdownFormatZone3").value,
          countdownFinish: document.getElementById("countdownFinishZone3").value,
          countdownShowUnits: document.getElementById("countdownShowUnitsZone3").checked,
          countdownPrefix: document.getElementById("countdownPrefixZone3").value,
          countdownSuffix: document.getElementById("countdownSuffixZone3").value
        }
        sendPost(data);
      }


      if (key == "applyMqttSettings") {
        data = {
          key: "mqttSettings",
          mqttEnable: document.querySelector("#mqttEnable").checked,
          mqttServerAddress: document.getElementById("mqttServerAddress").value,
          mqttServerPort: document.getElementById("mqttServerPort").value,
          mqttUsername: document.getElementById("mqttUsername").value,
          mqttPassword: document.getElementById("mqttPassword").value
        }
        sendPost(data);
      }

      if (key == "applyWallClockSettings") {
        data = {
          key: "wallClockSett",
          ntpTimeZone: document.getElementById("ntpTimeZone").value,
          disableDotsBlink: document.querySelector('#disableDotsBlink').checked,
          ntpUpdateInterval: document.getElementById("ntpUpdateInterval").value,
          ntpServer: document.getElementById("ntpServer").value
        }
        sendPost(data);
      }

      if (key == "applyOwmSettings") {
        data = {
          key: "owmSettings",
          owmApiToken: document.getElementById("owmApiToken").value,
          owmUnitsFormat: document.getElementById("owmUnitsFormat").value,
          owmUpdateInterval: document.getElementById("owmUpdateInterval").value,
          owmCity: document.getElementById("owmCity").value
        }
        sendPost(data);
      }

      if (key == "applyHaSettings") {
        data = {
          key: "haSettings",
          haAddr: document.getElementById("haAddr").value,
          haApiToken: document.getElementById("haApiToken").value,
          haApiHttpType: document.getElementById("haApiHttpType").value,
          haApiPort: document.getElementById("haApiPort").value,
          haUpdateInterval: document.getElementById("haUpdateInterval").value
        }
        sendPost(data);
      }

      if (key == "applySystemSettings") {
        data = {
          key: "systemSettings",
          deviceName: document.getElementById("deviceName").value,
          disableServiceMessages: document.querySelector('#disableServiceMessages').checked
        }
        sendPost(data);
      }
      if (key == "applyDs18b20Settings") {
        data = {
          key: "ds18b20Settings",
          ds18b20Enable: document.querySelector('#ds18b20Enable').checked,
          ds18b20UpdateInterval: document.querySelector('#ds18b20UpdateInterval').value,
          ds18b20UnitsFormat: document.querySelector('#ds18b20UnitsFormat').value
        }
        sendPost(data);
      }
      if (key == "applyStockSettings") {
        data = {
          key: "stockSettings",
          stockApiToken: document.getElementById('stockApiToken').value,
          stockUpdateInterval: document.getElementById('stockUpdateInterval').value
        }
        sendPost(data);
      }


    };

    function sendPost(dataPost, retryCount) {
      retryCount = retryCount || 0;
      var toastDanger = new bootstrap.Toast(document.getElementById('liveToastDanger'));
      var toastSuccess = new bootstrap.Toast(document.getElementById('liveToastSuccess'));

      var request = $.ajax({
        url: "/api/config",
        method: "POST",
        cache: false,
        data: dataPost,
        dataType: "json"
      });

      request.done(function (msg) {
        toastSuccess.show();
      });

      request.fail(function (jqXHR, textStatus, responseText) {
        if (jqXHR.status === 503 && retryCount < 2) {
          var toastBusy = new bootstrap.Toast(document.getElementById('liveToastBusy'));
          toastBusy.show();
          console.log("Device busy, retry " + (retryCount + 1) + "/3 in 2s...");
          setTimeout(function () { sendPost(dataPost, retryCount + 1); }, 2000);
        } else {
          if (jqXHR.status === 503) {
            alert("Device busy after 3 attempts. Please try again later.");
          } else {
            alert("Request failed: " + responseText);
          }
          toastDanger.show();
        }
      });
    }
    function apiResetWifi() {
      if (confirm("This will reset WiFi settings and reboot. You will need to connect to the AP to reconfigure. Are you sure?")) {
        var request = $.ajax({
          url: "/api/resetWifi",
          method: "POST",
          cache: false
        });
        request.done(function (msg) {
          // alert("Device is resetting WiFi...");
        });
        request.fail(function (jqXHR, textStatus) {
          alert("Request failed: " + textStatus);
        });
      }
    }
    function apiRebootDevice() {
      if (confirm("Are you sure you want to reboot the device?")) {
        var request = $.ajax({
          url: "/api/reboot",
          method: "POST",
          cache: false
        });
        request.done(function (msg) {
          // alert("Device is rebooting...");
        });
        request.fail(function (jqXHR, textStatus) {
          alert("Request failed: " + textStatus);
        });
      }
    }
    function apiFactoryReset() {
      if (confirm("WARNING: This will erase ALL settings (WiFi, MQTT, zones, etc.) and reboot. Are you absolutely sure?")) {
        var request = $.ajax({
          url: "/api/factory-reset",
          method: "POST",
          cache: false
        });
        request.done(function (msg) {
          alert("Factory reset complete. Device is rebooting...");
        });
        request.fail(function (jqXHR, textStatus) {
          alert("Request failed: " + textStatus);
        });
      }
    }
  </script>

</body>

</html>